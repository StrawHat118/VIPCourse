function FrontBase(){}function Auth(){var t=this;t.maskWrapper=$(".mask-wrapper"),t.scrollWrapper=$(".scrool-wrapper"),t.smsCaptcha=$(".sms-captcha-btn")}FrontBase.prototype.run=function(){this.listenAuthBoxHover()},FrontBase.prototype.listenAuthBoxHover=function(){var t=$(".auth-box"),n=$(".user-more-box");t.hover(function(){n.show()},function(){n.hide()})},$(function(){(new FrontBase).run()}),Auth.prototype.run=function(){var t=this;t.listenShowHideEvent(),t.listenSwitchEvent(),t.listenSigninEvent(),t.listenImgCaptchaEvent(),t.listenSmsCaptchaEvent(),t.listenSignupEvent()},Auth.prototype.showEvent=function(){this.maskWrapper.show()},Auth.prototype.hideEvent=function(){this.maskWrapper.hide()},Auth.prototype.listenShowHideEvent=function(){var t=this,n=$(".signin-btn"),e=$(".signup-btn"),s=$(".close-btn");n.click(function(){t.showEvent(),t.scrollWrapper.css({left:0})}),e.click(function(){t.showEvent(),t.scrollWrapper.css({left:-400})}),s.click(function(){t.hideEvent()})},Auth.prototype.listenSwitchEvent=function(){var n=this;$(".switch").click(function(){var t=n.scrollWrapper.css("left");(t=parseInt(t))<0?n.scrollWrapper.animate({left:"0"}):n.scrollWrapper.animate({left:"-400px"})})},Auth.prototype.listenSigninEvent=function(){var o=this,t=$(".signin-group"),s=t.find("input[name='telephone']"),a=t.find("input[name='password']"),i=t.find("input[name='remember']");t.find(".submit-btn").click(function(){var t=s.val(),n=a.val(),e=i.prop("checked");xfzajax.post({url:"/account/login/",data:{telephone:t,password:n,remember:e?1:0},success:function(t){if(200===t.code)o.hideEvent(),window.location.reload();else{var n=t.message;if(console.log(n),"string"==typeof n||n.constructor==String)window.messageBox.show(n);else for(var e in n){var s=n[e].message;window.messageBox.show(s)}}},fail:function(t){console.log(t)}})})},Auth.prototype.listenSignupEvent=function(){var i=this,t=$(".signup-group"),n=t.find(".submit-btn"),c=t.find("input[name='telephone']"),r=t.find("input[name='username']"),p=t.find("input[name='img_captcha']"),u=t.find("input[name='password1']"),l=t.find("input[name='password2']"),h=t.find("input[name='sms_captcha']");n.click(function(){var t=c.val(),n=r.val(),e=p.val(),s=u.val(),o=l.val(),a=h.val();xfzajax.post({url:"/account/register/",data:{telephone:t,username:n,img_captcha:e,password1:s,password2:o,sms_captcha:a},success:function(t){if(200===t.code)i.hideEvent(),window.location.reload();else{var n=t.message;if(console.log(n),"string"==typeof n||n.constructor==String)window.messageBox.show(n);else for(var e in n){var s=n[e].message;window.messageBox.show(s)}}},fail:function(t){console.log(t)}})})},Auth.prototype.listenImgCaptchaEvent=function(){var t=$(".img-captcha");t.click(function(){t.attr("src","/account/img_captcha?random="+Math.random())})},Auth.prototype.smsSuccessEvent=function(){var t=this;messageBox.showSuccess("短信验证码发送成功！"),t.smsCaptcha.addClass("disabled");var n=10;t.smsCaptcha.unbind("click");var e=setInterval(function(){t.smsCaptcha.text(n+"s"),(n-=1)<=0&&(clearInterval(e),t.smsCaptcha.removeClass("disabled"),t.smsCaptcha.text("发送验证码"),t.listenSmsCaptchaEvent())},1e3)},Auth.prototype.listenSmsCaptchaEvent=function(){var n=this,t=$(".sms-captcha-btn"),e=$(".signup-group input[name='telephone']");t.click(function(){var t=e.val();t?xfzajax.get({url:"/account/sms_captcha/",data:{telephone:t},success:function(t){200==t.code&&(console.log(t),n.smsSuccessEvent())},fail:function(){console.log(error)}}):messageBox.showInfo("请输入手机号码！")})},$(function(){(new Auth).run()}),$(function(){template&&(template.defaults.imports.timeSince=function(t){var n=new Date(t),e=n.getTime(),s=((new Date).getTime()-e)/1e3;return s<60?"刚刚":60<=s&&s<3600?(minutes=parseInt(s/60),minutes+"分钟前"):3600<=s&&s<86400?(hours=parseInt(s/60/60),hours+"小时前"):86400<=s&&s<2592e3?(days=parseInt(s/60/60/24),days+"天前"):n.getFullYear()+"/"+n.getMonth()+"/"+n.getDay()+"/ "+n.getHours()+":"+n.getMinutes()})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZyb250X2Jhc2UuanMiXSwibmFtZXMiOlsiRnJvbnRCYXNlIiwiQXV0aCIsInNlbGYiLCJ0aGlzIiwibWFza1dyYXBwZXIiLCIkIiwic2Nyb2xsV3JhcHBlciIsInNtc0NhcHRjaGEiLCJwcm90b3R5cGUiLCJydW4iLCJsaXN0ZW5BdXRoQm94SG92ZXIiLCJhdXRoQm94IiwidXNlck1vcmVCb3giLCJob3ZlciIsInNob3ciLCJoaWRlIiwibGlzdGVuU2hvd0hpZGVFdmVudCIsImxpc3RlblN3aXRjaEV2ZW50IiwibGlzdGVuU2lnbmluRXZlbnQiLCJsaXN0ZW5JbWdDYXB0Y2hhRXZlbnQiLCJsaXN0ZW5TbXNDYXB0Y2hhRXZlbnQiLCJsaXN0ZW5TaWdudXBFdmVudCIsInNob3dFdmVudCIsImhpZGVFdmVudCIsInNpZ25pbkJ0biIsInNpZ251cEJ0biIsImNsb3NlQnRuIiwiY2xpY2siLCJjc3MiLCJsZWZ0IiwiY3VycmVudExlZnQiLCJwYXJzZUludCIsImFuaW1hdGUiLCJzaWduaW5Hcm91cCIsInRlbGVwaG9uZUlucHV0IiwiZmluZCIsInBhc3N3b3JkSW5wdXQiLCJyZW1lbWJlcklucHV0IiwidGVsZXBob25lIiwidmFsIiwicGFzc3dvcmQiLCJyZW1lbWJlciIsInByb3AiLCJ4ZnphamF4IiwicG9zdCIsInVybCIsImRhdGEiLCJzdWNjZXNzIiwicmVzdWx0Iiwid2luZG93IiwibG9jYXRpb24iLCJyZWxvYWQiLCJtZXNzYWdlT2JqZWN0IiwiY29uc29sZSIsImxvZyIsImNvbnN0cnVjdG9yIiwiU3RyaW5nIiwibWVzc2FnZUJveCIsImtleSIsIm1lc3NhZ2UiLCJmYWlsIiwiZXJyb3IiLCJzaWdudXBHcm91cCIsInN1Ym1pdEJ0biIsInVzZXJuYW1lSW5wdXQiLCJpbWdDYXB0Y2hhSW5wdXQiLCJwYXNzd29yZDFJbnB1dCIsInBhc3N3b3JkMklucHV0Iiwic21zQ2FwdGNoYUlucHV0IiwidXNlcm5hbWUiLCJpbWdfY2FwdGNoYSIsInBhc3N3b3JkMSIsInBhc3N3b3JkMiIsInNtc19jYXB0Y2hhIiwiaW1nQ2FwdGNoYSIsImF0dHIiLCJNYXRoIiwicmFuZG9tIiwic21zU3VjY2Vzc0V2ZW50Iiwic2hvd1N1Y2Nlc3MiLCJhZGRDbGFzcyIsImNvdW50IiwidW5iaW5kIiwidGltZXIiLCJzZXRJbnRlcnZhbCIsInRleHQiLCJjbGVhckludGVydmFsIiwicmVtb3ZlQ2xhc3MiLCJnZXQiLCJzaG93SW5mbyIsInRlbXBsYXRlIiwiZGVmYXVsdHMiLCJpbXBvcnRzIiwidGltZVNpbmNlIiwiZGF0ZVZhbHVlIiwiZGF0ZSIsIkRhdGUiLCJkYXRldHMiLCJnZXRUaW1lIiwidGltZXN0YW1wIiwibWludXRlcyIsImhvdXJzIiwiZGF5cyIsImdldEZ1bGxZZWFyIiwiZ2V0TW9udGgiLCJnZXREYXkiLCJnZXRIb3VycyIsImdldE1pbnV0ZXMiXSwibWFwcGluZ3MiOiJBQUNBLFNBQVNBLGFBNENULFNBQVNDLE9BRUwsSUFBSUMsRUFBT0MsS0FDWEQsRUFBS0UsWUFBY0MsRUFBRSxpQkFDckJILEVBQUtJLGNBQWdCRCxFQUFFLG1CQUN2QkgsRUFBS0ssV0FBYUYsRUFBRSxvQkE3Q3hCTCxVQUFVUSxVQUFVQyxJQUFNLFdBQ1hOLEtBQ05PLHNCQUlUVixVQUFVUSxVQUFVRSxtQkFBcUIsV0FDckMsSUFBSUMsRUFBVU4sRUFBRSxhQUNaTyxFQUFjUCxFQUFFLGtCQUNwQk0sRUFBUUUsTUFBTSxXQUNWRCxFQUFZRSxRQUNkLFdBQ0VGLEVBQVlHLFVBTXBCVixFQUFFLFlBQ2tCLElBQUlMLFdBQ1ZTLFFBZ0NkUixLQUFLTyxVQUFVQyxJQUFNLFdBQ2pCLElBQUlQLEVBQU9DLEtBQ1hELEVBQUtjLHNCQUNMZCxFQUFLZSxvQkFDTGYsRUFBS2dCLG9CQUNMaEIsRUFBS2lCLHdCQUNMakIsRUFBS2tCLHdCQUNMbEIsRUFBS21CLHFCQUdUcEIsS0FBS08sVUFBVWMsVUFBWSxXQUNabkIsS0FDTkMsWUFBWVUsUUFJckJiLEtBQUtPLFVBQVVlLFVBQVksV0FDWnBCLEtBQ05D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QyxTQUFTQyxRQUFRQyxVQUFZLFNBQVVDLEdBQ2pELElBQUlDLEVBQU8sSUFBSUMsS0FBS0YsR0FDaEJHLEVBQVNGLEVBQUtHLFVBRWRDLElBRFEsSUFBS0gsTUFBUUUsVUFDQUQsR0FBUSxJQUNqQyxPQUFJRSxFQUFZLEdBQ0wsS0FFYyxJQUFiQSxHQUFtQkEsRUFBWSxNQUNuQ0MsUUFBVXJFLFNBQVNvRSxFQUFVLElBQ3RCQyxRQUFRLE9BRUUsTUFBYkQsR0FBc0JBLEVBQVksT0FDdENFLE1BQVF0RSxTQUFTb0UsRUFBVSxHQUFHLElBQ3ZCRSxNQUFNLE9BRUksT0FBYkYsR0FBeUJBLEVBQVksUUFDekNHLEtBQU92RSxTQUFTb0UsRUFBVSxHQUFHLEdBQUcsSUFDekJHLEtBQUssTUFHRFAsRUFBS1EsY0FLSixJQUpBUixFQUFLUyxXQUlLLElBSFpULEVBQUtVLFNBR2UsS0FGbkJWLEVBQUtXLFdBRTJCLElBRDlCWCxFQUFLWSIsImZpbGUiOiJmcm9udF9iYXNlLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8v55So5p2l5aSE55CG5a+86Iiq5p2hXG5mdW5jdGlvbiBGcm9udEJhc2UoKSB7XG4gICAgXG59XG5cbkZyb250QmFzZS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24oKXtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgc2VsZi5saXN0ZW5BdXRoQm94SG92ZXIoKTtcbn1cblxuXG5Gcm9udEJhc2UucHJvdG90eXBlLmxpc3RlbkF1dGhCb3hIb3ZlciA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYXV0aEJveCA9ICQoXCIuYXV0aC1ib3hcIik7XG4gICAgdmFyIHVzZXJNb3JlQm94ID0gJChcIi51c2VyLW1vcmUtYm94XCIpO1xuICAgIGF1dGhCb3guaG92ZXIoZnVuY3Rpb24gKCkge1xuICAgICAgICB1c2VyTW9yZUJveC5zaG93KCk7XG4gICAgfSxmdW5jdGlvbiAoKSB7XG4gICAgICAgIHVzZXJNb3JlQm94LmhpZGUoKTtcbiAgICB9KVxuXG59O1xuXG4vL+aVtOS4que9kemhtemDveWKoOi9veWHuuadpeaJjeaJp+ihjOivpeWHveaVsFxuJChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGZyb250QmFzZSA9IG5ldyBGcm9udEJhc2UoKTtcbiAgICBmcm9udEJhc2UucnVuKCk7XG59KTtcblxuXG4vL+eUqOadpeWkhOeQhueZu+W9leWSjOazqOWGjFxuXG5cblxuXG4gLy/ngrnlh7vnmbvlvZXmjInpkq7vvIzlvLnlh7rmqKHlnZflr7nor53moYZcbi8vICQoZnVuY3Rpb24gKCkge1xuLy8gICAgICQoXCIjYnRuXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbi8vICAgICAgICAgJChcIi5tYXNrLXdyYXBwZXJcIikuc2hvdygpO1xuLy8gICAgIH0pXG4vLyAgICAgJChcIi5jbG9zZS1idG5cIikuY2xpY2soZnVuY3Rpb24gKCkge1xuLy8gICAgICAgICAkKFwiLm1hc2std3JhcHBlclwiKS5oaWRlKCk7XG4vLyAgICAgfSlcbi8vIH0pXG5cbi8v5p6E6YCg5Ye95pWwXG5mdW5jdGlvbiBBdXRoKCkge1xuICAgIC8v5Zyo6L+Z5Liq57G75Lit5b6I5aSa5Zyw5pa56YO95Lya55So5Yiw77yM5omA5Lul5a6a5LmJ5oiQ57G755qE5bGe5oCnXG4gICAgdmFyIHNlbGYgPSB0aGlzOy8v5ZCO5pyf5LiN5Lya5Lqn55Sf5Yay56qB77yMdGhpc+WcqOS4jeWQjOeahOWHveaVsOS4reS7o+ihqOS4jeWQjOeahOWvueixoVxuICAgIHNlbGYubWFza1dyYXBwZXIgPSAkKCcubWFzay13cmFwcGVyJylcbiAgICBzZWxmLnNjcm9sbFdyYXBwZXIgPSAkKFwiLnNjcm9vbC13cmFwcGVyXCIpO1xuICAgIHNlbGYuc21zQ2FwdGNoYSA9ICQoJy5zbXMtY2FwdGNoYS1idG4nKTtcblxuXG5cbn1cbi8v5p6E6YCg5Ye95pWw57uR5a6a5pa55rOVXG4vL3J1buaWueazleaYr+exu+aIluWvueixoeeahOWFpeWPo++8jOWMheaLrOebkeWQrOS6i+S7tmFqYXjkuovku7ZcbkF1dGgucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgc2VsZi5saXN0ZW5TaG93SGlkZUV2ZW50KCk7Ly/lnKhydW7mlrnms5XkuK3miY3kvJrmiafooYxcbiAgICBzZWxmLmxpc3RlblN3aXRjaEV2ZW50KCk7XG4gICAgc2VsZi5saXN0ZW5TaWduaW5FdmVudCgpO1xuICAgIHNlbGYubGlzdGVuSW1nQ2FwdGNoYUV2ZW50KCk7XG4gICAgc2VsZi5saXN0ZW5TbXNDYXB0Y2hhRXZlbnQoKTtcbiAgICBzZWxmLmxpc3RlblNpZ251cEV2ZW50KCk7XG59XG4vL+WxleekuuS6i+S7tlxuQXV0aC5wcm90b3R5cGUuc2hvd0V2ZW50ID0gZnVuY3Rpb24oKXtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgc2VsZi5tYXNrV3JhcHBlci5zaG93KCk7XG5cbn07XG4vL+makOiXj+S6i+S7tlxuQXV0aC5wcm90b3R5cGUuaGlkZUV2ZW50ID0gZnVuY3Rpb24oKXtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgc2VsZi5tYXNrV3JhcHBlci5oaWRlKCk7XG59O1xuLy/nm5HlkKzlsZXnpLrpmpDol4/kuovku7ZcbkF1dGgucHJvdG90eXBlLmxpc3RlblNob3dIaWRlRXZlbnQgPVxuICAgIGZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdmFyIHNpZ25pbkJ0biA9ICQoJy5zaWduaW4tYnRuJyk7XG4gICAgICAgIHZhciBzaWdudXBCdG4gPSAkKCcuc2lnbnVwLWJ0bicpO1xuICAgICAgICB2YXIgY2xvc2VCdG4gPSAkKCcuY2xvc2UtYnRuJyk7XG4gICAgICAgIHNpZ25pbkJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzZWxmLnNob3dFdmVudCgpO1xuICAgICAgICAgICAgc2VsZi5zY3JvbGxXcmFwcGVyLmNzcyh7XCJsZWZ0XCI6MH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBzaWdudXBCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2VsZi5zaG93RXZlbnQoKTtcbiAgICAgICAgICAgIHNlbGYuc2Nyb2xsV3JhcHBlci5jc3Moe1wibGVmdFwiOi00MDB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY2xvc2VCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2VsZi5oaWRlRXZlbnQoKTtcbiAgICAgICAgfSlcbiAgICB9O1xuLy/nm5HlkKzliIfmjaJcbkF1dGgucHJvdG90eXBlLmxpc3RlblN3aXRjaEV2ZW50ID1cbiAgICBmdW5jdGlvbigpe1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHZhciBzd2l0Y2hlciA9ICQoJy5zd2l0Y2gnKVxuICAgICAgICBzd2l0Y2hlci5jbGljayhmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgdmFyIGN1cnJlbnRMZWZ0ID0gc2VsZi5zY3JvbGxXcmFwcGVyLmNzcyhcImxlZnRcIik7XG4gICAgICAgIGN1cnJlbnRMZWZ0ID0gcGFyc2VJbnQoY3VycmVudExlZnQpOy8v6Kej5p6Q5Li65pW05Z6LXG4gICAgICAgIGlmIChjdXJyZW50TGVmdCA8MCl7XG4gICAgICAgICAgICBzZWxmLnNjcm9sbFdyYXBwZXIuYW5pbWF0ZSh7XCJsZWZ0XCI6JzAnfSkvL+acieWIh+aNouWKqOeUu1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc2VsZi5zY3JvbGxXcmFwcGVyLmFuaW1hdGUoe1wibGVmdFwiOlwiLTQwMHB4XCJ9KTtcbiAgICAgICAgfVxuXG4gICAgfSlcbiAgICB9XG5cblxuLy/nm5HlkKznmbvlvZXkuovku7ZcbkF1dGgucHJvdG90eXBlLmxpc3RlblNpZ25pbkV2ZW50ID1cbiAgICBmdW5jdGlvbigpe1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHZhciBzaWduaW5Hcm91cCA9ICQoJy5zaWduaW4tZ3JvdXAnKTtcbiAgICAgICAgdmFyIHRlbGVwaG9uZUlucHV0ID0gc2lnbmluR3JvdXAuZmluZChcImlucHV0W25hbWU9J3RlbGVwaG9uZSddXCIpO1xuICAgICAgICB2YXIgcGFzc3dvcmRJbnB1dCA9IHNpZ25pbkdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdwYXNzd29yZCddXCIpO1xuICAgICAgICB2YXIgcmVtZW1iZXJJbnB1dCA9IHNpZ25pbkdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdyZW1lbWJlciddXCIpO1xuXG4gICAgICAgIHZhciBzdWJtaXRCdG4gPSBzaWduaW5Hcm91cC5maW5kKFwiLnN1Ym1pdC1idG5cIik7XG4gICAgICAgIHN1Ym1pdEJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdGVsZXBob25lID0gdGVsZXBob25lSW5wdXQudmFsKCk7XG4gICAgICAgICAgICB2YXIgcGFzc3dvcmQgPSBwYXNzd29yZElucHV0LnZhbCgpO1xuICAgICAgICAgICAgdmFyIHJlbWVtYmVyID0gcmVtZW1iZXJJbnB1dC5wcm9wKFwiY2hlY2tlZFwiKTsvL+WLvumAieahhuS4jeiDveeUqHZhbOiOt+WPlu+8jOimgemAmui/h3Byb3DvvIzlt7Lli77pgInvvIxwcm9w5pa55rOV5Lya6L+U5ZuedHJ1Ze+8jOWQpuWImeS8mui/lOWbnmZhbHNlXG4gICAgICAgICAgICB4ZnphamF4LnBvc3Qoe1xuICAgICAgICAgICAgICAgICd1cmwnOicvYWNjb3VudC9sb2dpbi8nLFxuICAgICAgICAgICAgICAgICdkYXRhJzp7XG4gICAgICAgICAgICAgICAgICAgICd0ZWxlcGhvbmUnOnRlbGVwaG9uZSxcbiAgICAgICAgICAgICAgICAgICAgJ3Bhc3N3b3JkJzpwYXNzd29yZCxcbiAgICAgICAgICAgICAgICAgICAgJ3JlbWVtYmVyJzpyZW1lbWJlcj8xOjAsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAnc3VjY2Vzcyc6ZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaGlkZUV2ZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7Ly/ph43mlrDliqDovb3pobXpnaJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2VPYmplY3QgPSByZXN1bHRbJ21lc3NhZ2UnXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG1lc3NhZ2VPYmplY3QpXG4gICAgICAgICAgICAgICAgICAgICAgICBpZih0eXBlb2YgbWVzc2FnZU9iamVjdD09XCJzdHJpbmdcIiB8fG1lc3NhZ2VPYmplY3QuY29uc3RydWN0b3I9PVN0cmluZyl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvdyhtZXNzYWdlT2JqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcih2YXIga2V5IGluIG1lc3NhZ2VPYmplY3Qpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZXMgPSBtZXNzYWdlT2JqZWN0W2tleV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0gbWVzc2FnZXNbJ21lc3NhZ2UnXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvdyhtZXNzYWdlKTtcblxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICdmYWlsJzpmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9KVxuXG5cbiAgICAgICAgfSlcblxuICAgIH07XG5cbkF1dGgucHJvdG90eXBlLmxpc3RlblNpZ251cEV2ZW50ID1cbiAgICAgICAgZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB2YXIgc2lnbnVwR3JvdXAgPSAkKCcuc2lnbnVwLWdyb3VwJyk7XG4gICAgICAgIHZhciBzdWJtaXRCdG4gPSBzaWdudXBHcm91cC5maW5kKFwiLnN1Ym1pdC1idG5cIik7XG5cblxuXG4gICAgICAgIHZhciB0ZWxlcGhvbmVJbnB1dCA9IHNpZ251cEdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSd0ZWxlcGhvbmUnXVwiKTtcbiAgICAgICAgdmFyIHVzZXJuYW1lSW5wdXQgPSBzaWdudXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ndXNlcm5hbWUnXVwiKTtcbiAgICAgICAgdmFyIGltZ0NhcHRjaGFJbnB1dCA9IHNpZ251cEdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdpbWdfY2FwdGNoYSddXCIpO1xuICAgICAgICB2YXIgcGFzc3dvcmQxSW5wdXQgPSBzaWdudXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ncGFzc3dvcmQxJ11cIik7XG4gICAgICAgIHZhciBwYXNzd29yZDJJbnB1dCA9IHNpZ251cEdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdwYXNzd29yZDInXVwiKTtcbiAgICAgICAgdmFyIHNtc0NhcHRjaGFJbnB1dCA9IHNpZ251cEdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdzbXNfY2FwdGNoYSddXCIpO1xuICAgICAgICBzdWJtaXRCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICB2YXIgdGVsZXBob25lID0gdGVsZXBob25lSW5wdXQudmFsKCk7XG4gICAgICAgICAgICB2YXIgdXNlcm5hbWUgPSB1c2VybmFtZUlucHV0LnZhbCgpO1xuICAgICAgICAgICAgdmFyIGltZ19jYXB0Y2hhID0gaW1nQ2FwdGNoYUlucHV0LnZhbCgpO1xuICAgICAgICAgICAgdmFyIHBhc3N3b3JkMSA9IHBhc3N3b3JkMUlucHV0LnZhbCgpO1xuICAgICAgICAgICAgdmFyIHBhc3N3b3JkMiA9IHBhc3N3b3JkMklucHV0LnZhbCgpO1xuICAgICAgICAgICAgdmFyIHNtc19jYXB0Y2hhID0gc21zQ2FwdGNoYUlucHV0LnZhbCgpO1xuICAgICAgICAgICAgeGZ6YWpheC5wb3N0KHtcbiAgICAgICAgICAgICAgICAndXJsJzonL2FjY291bnQvcmVnaXN0ZXIvJyxcbiAgICAgICAgICAgICAgICAnZGF0YSc6e1xuICAgICAgICAgICAgICAgICAgICAndGVsZXBob25lJzp0ZWxlcGhvbmUsXG4gICAgICAgICAgICAgICAgICAgICd1c2VybmFtZSc6dXNlcm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICdpbWdfY2FwdGNoYSc6aW1nX2NhcHRjaGEsXG4gICAgICAgICAgICAgICAgICAgICdwYXNzd29yZDEnOnBhc3N3b3JkMSxcbiAgICAgICAgICAgICAgICAgICAgJ3Bhc3N3b3JkMic6cGFzc3dvcmQyLFxuICAgICAgICAgICAgICAgICAgICAnc21zX2NhcHRjaGEnOnNtc19jYXB0Y2hhXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAnc3VjY2Vzcyc6ZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaGlkZUV2ZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7Ly/ph43mlrDliqDovb3pobXpnaJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2VPYmplY3QgPSByZXN1bHRbJ21lc3NhZ2UnXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG1lc3NhZ2VPYmplY3QpXG4gICAgICAgICAgICAgICAgICAgICAgICBpZih0eXBlb2YgbWVzc2FnZU9iamVjdD09XCJzdHJpbmdcIiB8fG1lc3NhZ2VPYmplY3QuY29uc3RydWN0b3I9PVN0cmluZyl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvdyhtZXNzYWdlT2JqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcih2YXIga2V5IGluIG1lc3NhZ2VPYmplY3Qpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZXMgPSBtZXNzYWdlT2JqZWN0W2tleV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0gbWVzc2FnZXNbJ21lc3NhZ2UnXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvdyhtZXNzYWdlKTtcblxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICdmYWlsJzpmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9KVxuXG5cbiAgICAgICAgfSlcblxuICAgIH07XG5cblxuLy/nm5HlkKxcbkF1dGgucHJvdG90eXBlLmxpc3RlbkltZ0NhcHRjaGFFdmVudCA9IGZ1bmN0aW9uKCl7XG4gICAgLy/ojrflj5bov5nkuKrlhYPntKBcbiAgICB2YXIgaW1nQ2FwdGNoYSA9ICQoJy5pbWctY2FwdGNoYScpO1xuICAgIGltZ0NhcHRjaGEuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBpbWdDYXB0Y2hhLmF0dHIoXCJzcmNcIixcIi9hY2NvdW50L2ltZ19jYXB0Y2hhXCIrXCI/cmFuZG9tPVwiK01hdGgucmFuZG9tKCkpXG4gICAgfSlcbn1cblxuQXV0aC5wcm90b3R5cGUuc21zU3VjY2Vzc0V2ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBtZXNzYWdlQm94LnNob3dTdWNjZXNzKCfnn63kv6Hpqozor4HnoIHlj5HpgIHmiJDlip/vvIEnKTtcbiAgICBzZWxmLnNtc0NhcHRjaGEuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XG4gICAgdmFyIGNvdW50ID0gMTA7XG4gICAgc2VsZi5zbXNDYXB0Y2hhLnVuYmluZCgnY2xpY2snKTtcbiAgICB2YXIgdGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNlbGYuc21zQ2FwdGNoYS50ZXh0KGNvdW50KydzJyk7XG4gICAgICAgIGNvdW50IC09IDE7XG4gICAgICAgIGlmKGNvdW50IDw9IDApe1xuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcik7XG4gICAgICAgICAgICBzZWxmLnNtc0NhcHRjaGEucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICBzZWxmLnNtc0NhcHRjaGEudGV4dCgn5Y+R6YCB6aqM6K+B56CBJyk7XG4gICAgICAgICAgICBzZWxmLmxpc3RlblNtc0NhcHRjaGFFdmVudCgpO1xuICAgICAgICB9XG4gICAgfSwxMDAwKTtcbn07XG5cbkF1dGgucHJvdG90eXBlLmxpc3RlblNtc0NhcHRjaGFFdmVudCA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBzbXNDYXB0Y2hhID0gJCgnLnNtcy1jYXB0Y2hhLWJ0bicpO1xuICAgIHZhciB0ZWxlcGhvbmVJbnB1dCA9ICQoXCIuc2lnbnVwLWdyb3VwIGlucHV0W25hbWU9J3RlbGVwaG9uZSddXCIpO1xuICAgIHNtc0NhcHRjaGEuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdGVsZXBob25lID0gdGVsZXBob25lSW5wdXQudmFsKCk7XG4gICAgICAgIGlmKCF0ZWxlcGhvbmUpe1xuICAgICAgICAgICAgbWVzc2FnZUJveC5zaG93SW5mbygn6K+36L6T5YWl5omL5py65Y+356CB77yBJyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB4ZnphamF4LmdldCh7XG4gICAgICAgICAgICAndXJsJzonL2FjY291bnQvc21zX2NhcHRjaGEvJyxcbiAgICAgICAgICAgICdkYXRhJzp7XG4gICAgICAgICAgICAgICAgJ3RlbGVwaG9uZSc6dGVsZXBob25lLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdzdWNjZXNzJzpmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYocmVzdWx0Wydjb2RlJ109PTIwMCl7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuc21zU3VjY2Vzc0V2ZW50KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdmYWlsJzpmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuXG4gICAgICAgIH1cbiAgICB9KVxufVxuXG5cblxuLy/mlbTkuKrnvZHpobXlhajpg73liqDovb3lh7rmnaXlkI7miY3kvJrosIPnlKjor6Xlh73mlbBcbiQoZnVuY3Rpb24gKCkge1xuICAgIHZhciBhdXRoID0gbmV3IEF1dGgoKTtcbiAgICBhdXRoLnJ1bigpO1xufSk7XG5cbiQoZnVuY3Rpb24gKCkge1xuICAgIC8v5aaC5p6c5pyJ6L+Z5Liq5Y+Y6YeP77yM6K+05piO6L+Z5LiqYXJ0dGVtcGxhdGXnmoRqc+aWh+S7tiDooqvliqDovb3ov5vmnaXkuoZcbiAgICBpZih0ZW1wbGF0ZSl7XG4gICAgICAgICB0ZW1wbGF0ZS5kZWZhdWx0cy5pbXBvcnRzLnRpbWVTaW5jZSA9IGZ1bmN0aW9uIChkYXRlVmFsdWUpIHtcbiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZShkYXRlVmFsdWUpO1xuICAgICAgICB2YXIgZGF0ZXRzID0gZGF0ZS5nZXRUaW1lKCk7Ly/lvpfliLDnmoTmmK/mr6vnp5LnmoTml7bpl7RcbiAgICAgICAgdmFyIG5vd3RzID0gKG5ldyBEYXRlKCkpLmdldFRpbWUoKTsvL+W+l+WIsOeahOaYr+W9k+WJjeaXtumXtOeahOaXtumXtOaIs1xuICAgICAgICB2YXIgdGltZXN0YW1wID0gKG5vd3RzIC0gZGF0ZXRzKS8xMDAwOy8v6Zmk5LulMTAwMO+8jOW+l+WIsOenkuaVsFxuICAgICAgICBpZiAodGltZXN0YW1wIDwgNjApe1xuICAgICAgICAgICAgcmV0dXJuICfliJrliJonXG4gICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYodGltZXN0YW1wID49IDYwICYmIHRpbWVzdGFtcCA8IDYwKjYwKXtcbiAgICAgICAgICAgICAgICBtaW51dGVzID0gcGFyc2VJbnQodGltZXN0YW1wLzYwKVxuICAgICAgICAgICAgICAgIHJldHVybiBtaW51dGVzKyfliIbpkp/liY0nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYodGltZXN0YW1wID49IDYwKjYwICYmIHRpbWVzdGFtcCA8IDYwKjYwKjI0KSB7XG4gICAgICAgICAgICAgICAgaG91cnMgPSBwYXJzZUludCh0aW1lc3RhbXAvNjAvNjApXG4gICAgICAgICAgICAgICAgcmV0dXJuIGhvdXJzKyflsI/ml7bliY0nXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmKHRpbWVzdGFtcCA+PSA2MCo2MCoyNCAmJiB0aW1lc3RhbXAgPCA2MCo2MCoyNCozMCl7XG4gICAgICAgICAgICAgICAgZGF5cyA9IHBhcnNlSW50KHRpbWVzdGFtcC82MC82MC8yNClcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF5cysn5aSp5YmNJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgICAgICAgICAgdmFyIG1vbnRoID0gZGF0ZS5nZXRNb250aCgpO1xuICAgICAgICAgICAgICAgIHZhciBkYXkgPSBkYXRlLmdldERheSgpO1xuICAgICAgICAgICAgICAgIHZhciBob3VyID0gZGF0ZS5nZXRIb3VycygpO1xuICAgICAgICAgICAgICAgIHZhciBtaW51dGUgPSBkYXRlLmdldE1pbnV0ZXMoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4geWVhcisnLycrbW9udGgrJy8nK2RheSsnLycrXCIgXCIraG91citcIjpcIittaW51dGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbn0pXG5cbiJdfQ==
