function Banner(){this.bannerWidth=798,this.bannerGroup=$("#banner-group"),this.index=0,this.leftArrow=$(".left-arrow"),this.rightArrow=$(".right-arrow"),this.bannerUl=$("#banner-ul"),this.liList=this.bannerUl.children("li"),this.bannerCount=this.liList.length,this.pageControl=$(".page-control")}function Index(){var n=this;n.page=2,n.category_id=0,n.loadBtn=$("#load-more-btn"),template.defaults.imports.timeSince=function(n){var e=new Date(n),t=e.getTime(),i=((new Date).getTime()-t)/1e3;return i<60?"刚刚":60<=i&&i<3600?(minutes=parseInt(i/60),minutes+"分钟前"):3600<=i&&i<86400?(hours=parseInt(i/60/60),hours+"小时前"):86400<=i&&i<2592e3?(days=parseInt(i/60/60/24),days+"天前"):e.getFullYear()+"/"+e.getMonth()+"/"+e.getDay()+"/ "+e.getHours()+":"+e.getMinutes()}}Banner.prototype.initBanner=function(){var n=this;this.bannerUl.css({width:n.bannerWidth*(n.bannerCount+2),left:-n.bannerWidth});var e=n.liList.eq(0).clone(),t=n.liList.eq(n.bannerCount-1).clone();n.bannerUl.append(e),n.bannerUl.prepend(t)},Banner.prototype.initPageControl=function(){for(var n=this,e=0;e<n.bannerCount;e++){var t=$("<li></li>");n.pageControl.append(t),0===e&&t.addClass("active")}n.pageControl.css({width:16+12*n.bannerCount+16*(n.bannerCount-1)})},Banner.prototype.toggleArrow=function(n){n?(this.leftArrow.show(),this.rightArrow.show()):(this.leftArrow.hide(),this.rightArrow.hide())},Banner.prototype.listenBannerHover=function(){var n=this;this.bannerGroup.hover(function(){clearInterval(n.timer),n.toggleArrow(!0)},function(){n.loop(),n.toggleArrow(!1)})},Banner.prototype.loop=function(){var n=this;$("#banner-ul");this.timer=setInterval(function(){n.index>=n.bannerCount+1?(n.bannerUl.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()},2e3)},Banner.prototype.listenArrowClick=function(){var n=this;n.leftArrow.click(function(){0===n.index?(n.bannerUl.css({left:-n.bannerWidth*n.bannerCount}),n.index=n.bannerCount-1):n.index--,n.animate()}),n.rightArrow.click(function(){n.index===n.bannerCount+1?(n.bannerUl.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()})},Banner.prototype.animate=function(){var n=this;n.bannerUl.stop().animate({left:-798*n.index},500);var e=n.index;e=0===e?n.bannerCount-1:e===n.bannerCount+1?0:n.index-1,n.pageControl.children("li").eq(e).addClass("active"),n.pageControl.children("li").eq(e).siblings().removeClass("active")},Banner.prototype.listenPageControl=function(){var t=this;t.pageControl.children("li").each(function(n,e){$(e).click(function(){t.index=n+1,t.animate()})})},Banner.prototype.run=function(){console.log("running..."),this.initBanner(),this.initPageControl(),this.loop(),this.listenArrowClick(),this.listenPageControl(),this.listenBannerHover()},Index.prototype.listenLoadMoreEvent=function(){var i=this,r=$("#load-more-btn");r.click(function(){xfzajax.get({url:"/news/list",data:{p:i.page,category_id:i.category_id},success:function(n){if(200===n.code){var e=n.data;if(0<e.length){var t=template("news-item",{newses:e});$(".list-inner-group").append(t),i.page+=1}else r.hide()}}})})},Index.prototype.listenCategorySwitchEvent=function(){var n=$(".list-tab"),o=this;n.children().click(function(){var r=$(this),a=r.attr("data-category");xfzajax.get({url:"news/list/",data:{category_id:a,p:1},success:function(n){if(200===n.code){var e=$(".list-inner-group"),t=n.data,i=template("news-item",{newses:t});e.empty(),e.append(i),o.page=2,o.category_id=a,r.addClass("active").siblings().removeClass("active"),o.loadBtn.show()}}})})},Index.prototype.run=function(){this.listenLoadMoreEvent(),this.listenCategorySwitchEvent()},$(function(){(new Banner).run(),(new Index).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkJhbm5lciIsInRoaXMiLCJiYW5uZXJXaWR0aCIsImJhbm5lckdyb3VwIiwiJCIsImluZGV4IiwibGVmdEFycm93IiwicmlnaHRBcnJvdyIsImJhbm5lclVsIiwibGlMaXN0IiwiY2hpbGRyZW4iLCJiYW5uZXJDb3VudCIsImxlbmd0aCIsInBhZ2VDb250cm9sIiwiSW5kZXgiLCJzZWxmIiwicGFnZSIsImNhdGVnb3J5X2lkIiwibG9hZEJ0biIsInRlbXBsYXRlIiwiZGVmYXVsdHMiLCJpbXBvcnRzIiwidGltZVNpbmNlIiwiZGF0ZVZhbHVlIiwiZGF0ZSIsIkRhdGUiLCJkYXRldHMiLCJnZXRUaW1lIiwidGltZXN0YW1wIiwibWludXRlcyIsInBhcnNlSW50IiwiaG91cnMiLCJkYXlzIiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsImdldERheSIsImdldEhvdXJzIiwiZ2V0TWludXRlcyIsInByb3RvdHlwZSIsImluaXRCYW5uZXIiLCJjc3MiLCJ3aWR0aCIsImxlZnQiLCJmaXJzdEJhbm5lciIsImVxIiwiY2xvbmUiLCJsYXN0QmFubmVyIiwiYXBwZW5kIiwicHJlcGVuZCIsImluaXRQYWdlQ29udHJvbCIsImkiLCJjaXJjbGUiLCJhZGRDbGFzcyIsInRvZ2dsZUFycm93IiwiaXNTaG93Iiwic2hvdyIsImhpZGUiLCJsaXN0ZW5CYW5uZXJIb3ZlciIsImhvdmVyIiwiY2xlYXJJbnRlcnZhbCIsInRpbWVyIiwibG9vcCIsInNldEludGVydmFsIiwiYW5pbWF0ZSIsImxpc3RlbkFycm93Q2xpY2siLCJjbGljayIsInN0b3AiLCJzaWJsaW5ncyIsInJlbW92ZUNsYXNzIiwibGlzdGVuUGFnZUNvbnRyb2wiLCJlYWNoIiwib2JqIiwicnVuIiwiY29uc29sZSIsImxvZyIsImxpc3RlbkxvYWRNb3JlRXZlbnQiLCJ4ZnphamF4IiwiZ2V0IiwidXJsIiwiZGF0YSIsInAiLCJzdWNjZXNzIiwicmVzdWx0IiwibmV3c2VzIiwidHBsIiwibGlzdGVuQ2F0ZWdvcnlTd2l0Y2hFdmVudCIsInRhYkdyb3VwIiwibGkiLCJhdHRyIiwibmV3c0xpc3RHcm91cCIsImVtcHR5Il0sIm1hcHBpbmdzIjoiQUFxQkEsU0FBU0EsU0FHTEMsS0FBS0MsWUFBYyxJQUNuQkQsS0FBS0UsWUFBY0MsRUFBRSxpQkFDckJILEtBQUtJLE1BQVEsRUFFYkosS0FBS0ssVUFBWUYsRUFBRSxlQUNuQkgsS0FBS00sV0FBYUgsRUFBRSxnQkFDcEJILEtBQUtPLFNBQVdKLEVBQUUsY0FDbEJILEtBQUtRLE9BQVVSLEtBQUtPLFNBQVNFLFNBQVMsTUFDdENULEtBQUtVLFlBQWNWLEtBQUtRLE9BQU9HLE9BQy9CWCxLQUFLWSxZQUFjVCxFQUFFLGlCQWlMekIsU0FBU1UsUUFDTCxJQUFJQyxFQUFPZCxLQUNYYyxFQUFLQyxLQUFPLEVBQ1pELEVBQUtFLFlBQWMsRUFDbkJGLEVBQUtHLFFBQVVkLEVBQUUsa0JBQ2pCZSxTQUFTQyxTQUFTQyxRQUFRQyxVQUFZLFNBQVVDLEdBQzVDLElBQUlDLEVBQU8sSUFBSUMsS0FBS0YsR0FDaEJHLEVBQVNGLEVBQUtHLFVBRWRDLElBRFEsSUFBS0gsTUFBUUUsVUFDQUQsR0FBUSxJQUNyQyxPQUFJRSxFQUFZLEdBQ0wsS0FFVSxJQUFiQSxHQUFtQkEsRUFBWSxNQUNuQ0MsUUFBVUMsU0FBU0YsRUFBVSxJQUN0QkMsUUFBUSxPQUVFLE1BQWJELEdBQXNCQSxFQUFZLE9BQ3RDRyxNQUFRRCxTQUFTRixFQUFVLEdBQUcsSUFDdkJHLE1BQU0sT0FFSSxPQUFiSCxHQUF5QkEsRUFBWSxRQUN6Q0ksS0FBT0YsU0FBU0YsRUFBVSxHQUFHLEdBQUcsSUFDekJJLEtBQUssTUFHRFIsRUFBS1MsY0FLSixJQUpBVCxFQUFLVSxXQUlLLElBSFpWLEVBQUtXLFNBR2UsS0FGbkJYLEVBQUtZLFdBRTJCLElBRDlCWixFQUFLYSxjQTNNMUJyQyxPQUFPc0MsVUFBVUMsV0FBYSxXQUMxQixJQUFJeEIsRUFBT2QsS0FDWEEsS0FBS08sU0FBU2dDLElB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ckQsRUFBS0csUUFBUXFDLGNBT2pDekMsTUFBTXdCLFVBQVVrQyxJQUFNLFdBQ1B2RSxLQUNOMEUsc0JBRE0xRSxLQUVOb0YsNkJBT1RqRixFQUFFLFlBQ2UsSUFBSUosUUFDVndFLE9BQ0ssSUFBSTFELE9BQ1YwRCIsImZpbGUiOiJpbmRleC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvL+mdouWQkeWvueixoVxuLy8xLumAmui/h3RoaXPlhbPplK7lrZfnu5HlrprlsZ7mgKcs5bm25LiU5oyH5a6a5a6D55qE5YC8XG4vL+WOn+Wei+mTvlxuLy/mt7vliqDmlrnms5Vcbi8v5ZyoQmFubmVyLnByb3RvdHlwZeS4iue7keWumuaWueazleWNs+WPr1xuLy8gZnVuY3Rpb24gQmFubmVyKCkge1xuLy8gICAgIC8v6L+Z6YeM55qE5Luj56CB55u45b2T5LqOcHl0aG9u5Lit55qEX19pbmluX1/mlrnms5XnmoTku6PnoIFcbi8vICAgICBjb25zb2xlLmxvZygn5p6E6YCg5Ye95pWwJyk7XG4vLyAgICAgdGhpcy5wZXJzb24gPSAnemhpbGlhbycvL3RoaXPku6PooajlvZPliY3nmoRCYW5uZXLlr7nosaFcbi8vXG4vLyB9XG4vLyAvL+WOn+Wei+mTvlxuLy8gQmFubmVyLnByb3RvdHlwZS5ncmVldCA9IGZ1bmN0aW9uICh3b3JkKSB7XG4vLyAgICAgY29uc29sZS5sb2coJ2hlbGxvJyx3b3JkKTtcbi8vXG4vLyB9XG4vL1xuLy8gdmFyIGJhbm5lciA9IG5ldyBCYW5uZXIoKTtcbi8vIGNvbnNvbGUubG9nKGJhbm5lci5wZXJzb24pO1xuLy8gYmFubmVyLmdyZWV0KCd6aGlsaWFvJyk7XG5cbmZ1bmN0aW9uIEJhbm5lcigpIHtcbiAgICAvL+aehOmAoOWHveaVsFxuICAgIC8v5o+Q5Y+WYmFubmVyLWdyb3VwXG4gICAgdGhpcy5iYW5uZXJXaWR0aCA9IDc5ODtcbiAgICB0aGlzLmJhbm5lckdyb3VwID0gJChcIiNiYW5uZXItZ3JvdXBcIik7XG4gICAgdGhpcy5pbmRleCA9IDA7XG4gICAgLy/mj5Dpq5jmgKfog73vvIzpgJrov4flsZ7mgKfmnaXosIPnlKjvvIzlm6DkuLrlt7Lnu4/lrprkuYnlnKjmnoTpgKDlh73mlbDkuK1cbiAgICB0aGlzLmxlZnRBcnJvdyA9ICQoJy5sZWZ0LWFycm93JylcbiAgICB0aGlzLnJpZ2h0QXJyb3cgPSAkKCcucmlnaHQtYXJyb3cnKTtcbiAgICB0aGlzLmJhbm5lclVsID0gJChcIiNiYW5uZXItdWxcIik7Ly/ojrflj5Z1bOagh+etvlxuICAgIHRoaXMubGlMaXN0ICA9IHRoaXMuYmFubmVyVWwuY2hpbGRyZW4oXCJsaVwiKTtcbiAgICB0aGlzLmJhbm5lckNvdW50ID0gdGhpcy5saUxpc3QubGVuZ3RoO1xuICAgIHRoaXMucGFnZUNvbnRyb2wgPSAkKCcucGFnZS1jb250cm9sJyk7XG5cbn1cbi8v5a6a5LmJYmFubmVyVWznmoTplb/luqZcbkJhbm5lci5wcm90b3R5cGUuaW5pdEJhbm5lciA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIHNlbGYgPSB0aGlzXG4gICAgdGhpcy5iYW5uZXJVbC5jc3Moe3dpZHRoOnNlbGYuYmFubmVyV2lkdGgqKHNlbGYuYmFubmVyQ291bnQrMiksJ2xlZnQnOi1zZWxmLmJhbm5lcldpZHRofSkvL+iuvue9ruWuveW6pizpgJrov4djc3PmnaXorr7nva7moLflvI9cblxuICAgIC8v56ys5LiA5byg6L2u5pKt5Zu+LOiOt+WPluesrDDkuKpsaeagh+etvizlr7nnrKzkuIDkuKpsaeagh+etvui/m+ihjOWkjeWItlxuICAgIHZhciBmaXJzdEJhbm5lciA9IHNlbGYubGlMaXN0LmVxKDApLmNsb25lKCk7XG4gICAgdmFyIGxhc3RCYW5uZXIgPSBzZWxmLmxpTGlzdC5lcShzZWxmLmJhbm5lckNvdW50LTEpLmNsb25lKCk7XG4gICAgLy/lsIbnrKzkuIDlvKDova7mkq3lm77mt7vliqDliLDmnIDlkI7pnaJcbiAgICBzZWxmLmJhbm5lclVsLmFwcGVuZChmaXJzdEJhbm5lcik7XG4gICAgLy9wcmVwZW5kIOWwhuWFg+e0oOa3u+WKoOWIsOesrOS4gOS4qlxuICAgIHNlbGYuYmFubmVyVWwucHJlcGVuZChsYXN0QmFubmVyKTtcblxuXG5cblxufVxuXG5cblxuXG5cbi8v5aSE55CG5bCP54K554K5XG5CYW5uZXIucHJvdG90eXBlLmluaXRQYWdlQ29udHJvbCA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIGZvcih2YXIgaT0wOyBpIDxzZWxmLmJhbm5lckNvdW50OyBpKyspe1xuICAgICAgICB2YXIgY2lyY2xlID0gJChcIjxsaT48L2xpPlwiKTtcbiAgICAgICAgc2VsZi5wYWdlQ29udHJvbC5hcHBlbmQoY2lyY2xlKVxuICAgICAgICBpZihpID09PSAwKXtcbiAgICAgICAgICAgIGNpcmNsZS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNlbGYucGFnZUNvbnRyb2wuY3NzKHtcIndpZHRoXCI6OCoyKzEyKnNlbGYuYmFubmVyQ291bnQrMTYqKHNlbGYuYmFubmVyQ291bnQtMSl9KVxufVxuXG5cblxuXG4vL+aYvuekuuWSjOmakOiXj2Fycm93XG5CYW5uZXIucHJvdG90eXBlLnRvZ2dsZUFycm93ID0gZnVuY3Rpb24oaXNTaG93KXtcbiAgICAvL+mAmui/h+WPguaVsOadpeaOp+WItlxuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBpZihpc1Nob3cpe1xuICAgICAgICB0aGlzLmxlZnRBcnJvdy5zaG93KCk7XG4gICAgICAgIHRoaXMucmlnaHRBcnJvdy5zaG93KCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aGlzLmxlZnRBcnJvdy5oaWRlKCk7XG4gICAgICAgIHRoaXMucmlnaHRBcnJvdy5oaWRlKCk7XG4gICAgfVxuXG5cbn1cblxuXG4vL+ebkeWQrGJhbm5lcuaYr+WQpuiiq+imhuebllxuQmFubmVyLnByb3RvdHlwZS5saXN0ZW5CYW5uZXJIb3ZlciAgPSBmdW5jdGlvbigpe1xuICAgIC8v6YCa6L+HdGhpc+WvueixoeiOt+WPlkJhbm5lcuWvueixoeeahOWxnuaAp1xuICAgIHZhciBzZWxmID0gdGhpczsvL+WwhnRoaXPpgJrov4flj6blpJbkuIDkuKrlr7nosaHlvJXnlKhcbiAgICB0aGlzLmJhbm5lckdyb3VwLmhvdmVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy/nrKzkuIDkuKrlh73mlbDmmK/miorpvKDmoIfnp7vliqjliLBiYW5uZXLkuIrkvJrmiafooYznmoTlh73mlbBcbiAgICAgICAgICAgIC8vdGhpc+WcqOavj+S4quWHveaVsOS4reS7o+ihqOW9k+WJjeeahOWvueixoVxuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChzZWxmLnRpbWVyKTsvL+a4hemZpOWumuaXtuWZqFxuICAgICAgICAgICAgc2VsZi50b2dnbGVBcnJvdyh0cnVlKTsvL+iwg+eUqOmakOiXj+eahOaWueazlXRvZ2dsZVxuICAgIH0sZnVuY3Rpb24gKCkge1xuICAgICAgICAvL+esrOS6jOS4quWHveaVsOaYr+aKium8oOagh+S7jmJhbm5lcuS4iuenu+i1sOS8muaJp+ihjOeahOWHveaVsFxuICAgICAgICBzZWxmLmxvb3AoKTtcbiAgICAgICAgc2VsZi50b2dnbGVBcnJvdyhmYWxzZSk7XG4gICAgfVxuICAgICAgICApXG59XG4vL+WwhnJ1buaWueazleW9k+WBmkJhbm5lcueahOS4u+WFpeWPoyDvvIzkuI3miormiYDmnInnmoTpgLvovpHmlL7liLBydW7ph4zpnaJcbi8v5oqK55u45bqU55qE6YC76L6R5pS+5Zyo5Y2V54us55qE5Ye95pWw5Lit5aSE55CG77yMcnVu5Ye95pWw5Lit5Y+q6L+b6KGM5q2l6aqk55qE5ou85o6lXG4vL2Jhbm5lcuW+queOr1xuQmFubmVyLnByb3RvdHlwZS5sb29wID0gZnVuY3Rpb24oKXtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGJhbm5lclVsID0gJChcIiNiYW5uZXItdWxcIik7XG4gICAgIC8vIGJhbm5lclVsLmNzcyh7XCJsZWZ0XCI6LTc5OH0pO1xuICAgIC8vdGhpc+S7o+ihqGJhbm5lcuWvueixoeS4iueahOS4gOS4quWxnuaAp++8jOWFtuS7luWcsOaWueWwseWPr+S7pemAmui/h+WvueixoeadpeS9v+eUqFxuICAgIHRoaXMudGltZXIgPSAgc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZihzZWxmLmluZGV4Pj1zZWxmLmJhbm5lckNvdW50KzEpe1xuICAgICAgICAgICAgc2VsZi5iYW5uZXJVbC5jc3Moe1wibGVmdFwiOi1zZWxmLmJhbm5lcldpZHRofSlcbiAgICAgICAgICAgIHNlbGYuaW5kZXg9MjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHNlbGYuaW5kZXgrKztcbiAgICAgICAgfVxuICAgICAgICBzZWxmLmFuaW1hdGUoKTtcbiAgICB9LDIwMDApOy8v5a6a5pe25Zmo77yM5Lik56eS6ZKf5omn6KGM5LiA5qyh6L+Z5Liq5Luj56CBXG5cbn1cblxuLy/lrprkuYnnm5HlkKznrq3lpLRcbkJhbm5lci5wcm90b3R5cGUubGlzdGVuQXJyb3dDbGljayA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgc2VsZi5sZWZ0QXJyb3cuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBpZihzZWxmLmluZGV4ID09PSAwKXtcbiAgICAgICAgICAgIC8v5peg6ZmQ5b6q546vXG4gICAgICAgICAgICBzZWxmLmJhbm5lclVsLmNzcyh7XCJsZWZ0XCI6LXNlbGYuYmFubmVyV2lkdGgqc2VsZi5iYW5uZXJDb3VudH0pXG4gICAgICAgICAgICBzZWxmLmluZGV4ID0gc2VsZi5iYW5uZXJDb3VudCAtMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHNlbGYuaW5kZXgtLTtcbiAgICAgICAgfVxuICAgICAgICBzZWxmLmFuaW1hdGUoKTtcbiAgICB9KTtcbiAgICBzZWxmLnJpZ2h0QXJyb3cuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBpZihzZWxmLmluZGV4ID09PSBzZWxmLmJhbm5lckNvdW50ICsxKXtcbiAgICAgICAgICAgIC8v5peg6ZmQ5b6q546vXG4gICAgICAgICAgICBzZWxmLmJhbm5lclVsLmNzcyh7XCJsZWZ0XCI6LXNlbGYuYmFubmVyV2lkdGh9KTtcbiAgICAgICAgICAgIHNlbGYuaW5kZXggPSAyO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc2VsZi5pbmRleCsrO1xuICAgICAgICB9XG4gICAgICAgIHNlbGYuYW5pbWF0ZSgpO1xuXG4gICAgfSlcbn1cblxuLy9cbkJhbm5lci5wcm90b3R5cGUuYW5pbWF0ZSA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHNlbGYuYmFubmVyVWwuc3RvcCgpLmFuaW1hdGUoe1wibGVmdFwiOi03OTgqc2VsZi5pbmRleH0sNTAwKTsvL3N0b3DpmLLmraLlh7rnjrDliqjnlLvlj6DliqBcbiAgICAvL+WkhOeQhuaXoOmZkOW+queOr+i9ruaSreWbvueahOWwj+eCueeCuVxuICAgIHZhciBpbmRleCA9IHNlbGYuaW5kZXg7XG4gICAgaWYoaW5kZXg9PT0wKXtcbiAgICAgICAgaW5kZXggPXNlbGYuYmFubmVyQ291bnQtMTtcbiAgICB9ZWxzZSBpZihpbmRleCA9PT0gc2VsZi5iYW5uZXJDb3VudCsxKXtcbiAgICAgICAgaW5kZXggPSAwICA7XG4gICAgfWVsc2Uge1xuICAgICAgICBpbmRleCA9IHNlbGYuaW5kZXggLTEgO1xuICAgIH1cbiAgICA7XG5cbiAgICAvL2Vx5Luj6KGo6I635Y+WbGnmoIfnrb7kuK3nmoTnrKzlh6DkuKpcbiAgICBzZWxmLnBhZ2VDb250cm9sLmNoaWxkcmVuKFwibGlcIikuZXEoaW5kZXgpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICBzZWxmLnBhZ2VDb250cm9sLmNoaWxkcmVuKFwibGlcIikuZXEoaW5kZXgpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xufTtcblxuXG5cblxuLy/nm5HlkKzlsI/ngrnngrlcbkJhbm5lci5wcm90b3R5cGUubGlzdGVuUGFnZUNvbnRyb2wgPSBmdW5jdGlvbigpe1xuICAgIHZhciBzZWxmID10aGlzO1xuICAgIHNlbGYucGFnZUNvbnRyb2wuY2hpbGRyZW4oXCJsaVwiKS5lYWNoKGZ1bmN0aW9uIChpbmRleCxvYmopIHtcbiAgICAgICAgJChvYmopLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgc2VsZi5pbmRleCA9IGluZGV4ICsgMTtcbiAgICAgICAgICAgc2VsZi5hbmltYXRlKClcblxuICAgICAgICB9KTtcbiAgICB9KTtcblxufTtcblxuXG5cblxuXG5CYW5uZXIucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zb2xlLmxvZygncnVubmluZy4uLicpO1xuICAgIHRoaXMuaW5pdEJhbm5lcigpO1xuICAgIHRoaXMuaW5pdFBhZ2VDb250cm9sKCk7XG4gICAgdGhpcy5sb29wKCk7XG4gICAgdGhpcy5saXN0ZW5BcnJvd0NsaWNrKCk7XG4gICAgdGhpcy5saXN0ZW5QYWdlQ29udHJvbCgpO1xuICAgIHRoaXMubGlzdGVuQmFubmVySG92ZXIoKTtcblxufTtcblxuXG5mdW5jdGlvbiBJbmRleCgpe1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBzZWxmLnBhZ2UgPSAyO1xuICAgIHNlbGYuY2F0ZWdvcnlfaWQgPSAwO1xuICAgIHNlbGYubG9hZEJ0biA9ICQoJyNsb2FkLW1vcmUtYnRuJyk7XG4gICAgdGVtcGxhdGUuZGVmYXVsdHMuaW1wb3J0cy50aW1lU2luY2UgPSBmdW5jdGlvbiAoZGF0ZVZhbHVlKSB7XG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoZGF0ZVZhbHVlKTtcbiAgICAgICAgdmFyIGRhdGV0cyA9IGRhdGUuZ2V0VGltZSgpOy8v5b6X5Yiw55qE5piv5q+r56eS55qE5pe26Ze0XG4gICAgICAgIHZhciBub3d0cyA9IChuZXcgRGF0ZSgpKS5nZXRUaW1lKCk7Ly/lvpfliLDnmoTmmK/lvZPliY3ml7bpl7TnmoTml7bpl7TmiLNcbiAgICAgICAgdmFyIHRpbWVzdGFtcCA9IChub3d0cyAtIGRhdGV0cykvMTAwMDsvL+mZpOS7pTEwMDDvvIzlvpfliLDnp5LmlbBcbiAgICBpZiAodGltZXN0YW1wIDwgNjApe1xuICAgICAgICByZXR1cm4gJ+WImuWImidcbiAgICB9XG4gICAgZWxzZSBpZih0aW1lc3RhbXAgPj0gNjAgJiYgdGltZXN0YW1wIDwgNjAqNjApe1xuICAgICAgICBtaW51dGVzID0gcGFyc2VJbnQodGltZXN0YW1wLzYwKVxuICAgICAgICByZXR1cm4gbWludXRlcysn5YiG6ZKf5YmNJztcbiAgICAgICAgfVxuICAgIGVsc2UgaWYodGltZXN0YW1wID49IDYwKjYwICYmIHRpbWVzdGFtcCA8IDYwKjYwKjI0KSB7XG4gICAgICAgIGhvdXJzID0gcGFyc2VJbnQodGltZXN0YW1wLzYwLzYwKVxuICAgICAgICByZXR1cm4gaG91cnMrJ+Wwj+aXtuWJjSdcbiAgICB9XG4gICAgZWxzZSBpZih0aW1lc3RhbXAgPj0gNjAqNjAqMjQgJiYgdGltZXN0YW1wIDwgNjAqNjAqMjQqMzApe1xuICAgICAgICBkYXlzID0gcGFyc2VJbnQodGltZXN0YW1wLzYwLzYwLzI0KVxuICAgICAgICByZXR1cm4gZGF5cysn5aSp5YmNJ1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdmFyIHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgIHZhciBtb250aCA9IGRhdGUuZ2V0TW9udGgoKTtcbiAgICAgICAgdmFyIGRheSA9IGRhdGUuZ2V0RGF5KCk7XG4gICAgICAgIHZhciBob3VyID0gZGF0ZS5nZXRIb3VycygpO1xuICAgICAgICB2YXIgbWludXRlID0gZGF0ZS5nZXRNaW51dGVzKCk7XG4gICAgICAgIHJldHVybiB5ZWFyKycvJyttb250aCsnLycrZGF5KycvJytcIiBcIitob3VyK1wiOlwiK21pbnV0ZTtcbiAgICB9XG4gICAgfVxufVxuXG5JbmRleC5wcm90b3R5cGUubGlzdGVuTG9hZE1vcmVFdmVudCA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBsb2FkQnRuID0gJCgnI2xvYWQtbW9yZS1idG4nKTtcbiAgICBsb2FkQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgeGZ6YWpheC5nZXQoe1xuICAgICAgICAgICAgJ3VybCc6Jy9uZXdzL2xpc3QnLFxuICAgICAgICAgICAgJ2RhdGEnOntcbiAgICAgICAgICAgICAgICAncCc6c2VsZi5wYWdlLFxuICAgICAgICAgICAgICAgICdjYXRlZ29yeV9pZCc6c2VsZi5jYXRlZ29yeV9pZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnc3VjY2Vzcyc6ZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGlmKHJlc3VsdFsnY29kZSddPT09MjAwKXtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld3NlcyA9IHJlc3VsdFsnZGF0YSddO1xuICAgICAgICAgICAgICAgICAgICBpZihuZXdzZXMubGVuZ3RoID4gMCl7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHBsID0gdGVtcGxhdGUoXCJuZXdzLWl0ZW1cIix7XCJuZXdzZXNcIjpuZXdzZXN9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1bCA9ICQoJy5saXN0LWlubmVyLWdyb3VwJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB1bC5hcHBlbmQodHBsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucGFnZSArPTE7XG4gICAgICAgICAgICAgICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRCdG4uaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfSk7XG5cblxufVxuXG5JbmRleC5wcm90b3R5cGUubGlzdGVuQ2F0ZWdvcnlTd2l0Y2hFdmVudCA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIHRhYkdyb3VwID0gJCgnLmxpc3QtdGFiJyk7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHRhYkdyb3VwLmNoaWxkcmVuKCkuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAvL3RhYkdyb3VwLmNoaWxkcmVuKCkg6I635Y+W55u05o6l5a2Q5YWD57Sg77yM5bCx5pivbGnmoIfnrb5cbiAgICAgICAgLy90aGlz5Luj6KGo5b2T5YmN6YCJ5Lit55qEbGnmoIfnrb5cbiAgICAgICAgdmFyIGxpID0gJCh0aGlzKTtcbiAgICAgICAgdmFyIGNhdGVnb3J5X2lkID0gbGkuYXR0cihcImRhdGEtY2F0ZWdvcnlcIik7XG4gICAgICAgIHZhciBwYWdlID0gMTtcbiAgICAgICAgeGZ6YWpheC5nZXQoe1xuICAgICAgICAgICAgJ3VybCc6J25ld3MvbGlzdC8nLFxuICAgICAgICAgICAgJ2RhdGEnOntcbiAgICAgICAgICAgICAgICAnY2F0ZWdvcnlfaWQnOmNhdGVnb3J5X2lkLFxuICAgICAgICAgICAgICAgICdwJzpwYWdlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdzdWNjZXNzJzpmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYocmVzdWx0Wydjb2RlJ109PT0yMDApe1xuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3c0xpc3RHcm91cCA9ICQoXCIubGlzdC1pbm5lci1ncm91cFwiKVxuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3c2VzID0gcmVzdWx0WydkYXRhJ107XG4gICAgICAgICAgICAgICAgICAgIHZhciB0cGwgPSB0ZW1wbGF0ZShcIm5ld3MtaXRlbVwiLHtcIm5ld3Nlc1wiOm5ld3Nlc30pO1xuICAgICAgICAgICAgICAgICAgICBuZXdzTGlzdEdyb3VwLmVtcHR5KCk7Ly/lsIbmoIfnrb7kuIvnmoTmiYDmnInlrZDlhYPntKDpg73liKDmjolcbiAgICAgICAgICAgICAgICAgICAgbmV3c0xpc3RHcm91cC5hcHBlbmQodHBsKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5wYWdlID0gMjtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jYXRlZ29yeV9pZCA9IGNhdGVnb3J5X2lkO1xuICAgICAgICAgICAgICAgICAgICBsaS5hZGRDbGFzcygnYWN0aXZlJykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYubG9hZEJ0bi5zaG93KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH0pXG59XG5cbkluZGV4LnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbigpe1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBzZWxmLmxpc3RlbkxvYWRNb3JlRXZlbnQoKTtcbiAgICBzZWxmLmxpc3RlbkNhdGVnb3J5U3dpdGNoRXZlbnQoKTtcblxuXG59XG5cblxuLy8k5Ye95pWw6Z2e5bi45by65aSn77yM5aaC5p6c5Zyo6L+Z5Liq5Ye95pWw5Lit5a6a5LmJ5LqG5Y+m5aSW5LiA5Liq5Ye95pWw77yM5LiA5a6a5Lya5Zyo5pW05Liq5paH5qGj5YWD57Sg5YWo6YOo5Yqg6L295ZCO5omN5Lya5omn6KGM6L+Z6YeM6Z2i55qE5Luj56CBXG4kKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYmFubmVyID0gbmV3IEJhbm5lcigpO1xuICAgIGJhbm5lci5ydW4oKTtcbiAgICB2YXIgaW5kZXggPSBuZXcgSW5kZXgoKTtcbiAgICBpbmRleC5ydW4oKTtcblxufSk7Il19
