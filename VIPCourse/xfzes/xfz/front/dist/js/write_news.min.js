function News(){}News.prototype.initEditor=function(){window.ue=UE.getEditor("editor",{initialFrameHeight:400,serverUrl:"/ueditor/upload/"})},News.prototype.listenQiniuUploadFileEvent=function(){var r=this;$("#thumbnail-btn").change(function(){var a=this.files[0];xfzajax.get({url:"/cms/qntoken/",success:function(e){if(200===e.code){var t=e.data.token,n=(new Date).getTime()+"."+a.name.split(".")[1],o={fname:n,params:{},mimeType:["image/png","image/jpeg","image/gif"]},i={userCdnDomain:!0,retryCount:6,region:qiniu.region.z0};qiniu.upload(a,n,t,o,i).subscribe({next:r.handleFileUploadProgress,error:r.handleFileUploadError,complete:r.handleFileUploadComplete})}}})})},News.prototype.handleFileUploadProgress=function(e){var t=e.total.percent.toFixed(0)+"%",n=$("#progress-group"),o=$(".progress-bar");o.css({width:0}),n.show(),o.css({width:t}),o.text(t)},News.prototype.handleFileUploadError=function(e){console.log(e.message),$("#progress-group").hide()},News.prototype.handleFileUploadComplete=function(e){console.log(e),$("#progress-group").hide();var t="http://psid3o9h4.bkt.clouddn.com/"+e.key;$("input[name='thumbnail']").val(t)},News.prototype.listenSubmitEvent=function(){$("#submit-btn").click(function(){event.preventDefault();var e=$("input[name='title']").val(),t=$("select[name='category']").val(),n=$("input[name='desc']").val(),o=$("input[name='thumbnail']").val(),i=window.ue.getContent();xfzajax.post({url:"/cms/write_news/",data:{title:e,category:t,desc:n,thumbnail:o,content:i},success:function(e){200===e.code&&xfzalert.alertSuccess("恭喜！新闻发表成功",function(){window.location.reload()})}})})},News.prototype.run=function(){var e=this;e.listenQiniuUploadFileEvent(),e.initEditor(),e.listenSubmitEvent()},$(function(){(new News).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndyaXRlX25ld3MuanMiXSwibmFtZXMiOlsiTmV3cyIsInByb3RvdHlwZSIsImluaXRFZGl0b3IiLCJ3aW5kb3ciLCJ1ZSIsIlVFIiwiZ2V0RWRpdG9yIiwiaW5pdGlhbEZyYW1lSGVpZ2h0Iiwic2VydmVyVXJsIiwibGlzdGVuUWluaXVVcGxvYWRGaWxlRXZlbnQiLCJzZWxmIiwidGhpcyIsIiQiLCJjaGFuZ2UiLCJmaWxlIiwiZmlsZXMiLCJ4ZnphamF4IiwiZ2V0IiwidXJsIiwic3VjY2VzcyIsInJlc3VsdCIsInRva2VuIiwia2V5IiwiRGF0ZSIsImdldFRpbWUiLCJuYW1lIiwic3BsaXQiLCJwdXRFeHRyYSIsImZuYW1lIiwicGFyYW1zIiwibWltZVR5cGUiLCJjb25maWciLCJ1c2VyQ2RuRG9tYWluIiwicmV0cnlDb3VudCIsInJlZ2lvbiIsInFpbml1IiwiejAiLCJ1cGxvYWQiLCJzdWJzY3JpYmUiLCJuZXh0IiwiaGFuZGxlRmlsZVVwbG9hZFByb2dyZXNzIiwiZXJyb3IiLCJoYW5kbGVGaWxlVXBsb2FkRXJyb3IiLCJjb21wbGV0ZSIsImhhbmRsZUZpbGVVcGxvYWRDb21wbGV0ZSIsInJlc3BvbnNlIiwicGVyY2VudFRleHQiLCJ0b3RhbCIsInBlcmNlbnQiLCJ0b0ZpeGVkIiwicHJvZ3Jlc3NHcm91cCIsInByb2dyZXNzQmFyIiwiY3NzIiwid2lkdGgiLCJzaG93IiwidGV4dCIsImNvbnNvbGUiLCJsb2ciLCJtZXNzYWdlIiwiaGlkZSIsInZhbCIsImxpc3RlblN1Ym1pdEV2ZW50IiwiY2xpY2siLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwidGl0bGUiLCJjYXRlZ29yeSIsImRlc2MiLCJ0aHVtYm5haWwiLCJjb250ZW50IiwiZ2V0Q29udGVudCIsInBvc3QiLCJkYXRhIiwieGZ6YWxlcnQiLCJhbGVydFN1Y2Nlc3MiLCJsb2NhdGlvbiIsInJlbG9hZCIsInJ1biJdLCJtYXBwaW5ncyI6IkFBSUMsU0FBU0EsUUFLVEEsS0FBS0MsVUFBVUMsV0FBYSxXQUN6QkMsT0FBT0MsR0FBS0MsR0FBR0MsVUFBVSxTQUFTLENBQzlCQyxtQkFBcUIsSUFDckJDLFVBQVksc0JBSW5CUixLQUFLQyxVQUFVUSwyQkFBNkIsV0FDekMsSUFBSUMsRUFBT0MsS0FDS0MsRUFBRSxrQkFDUkMsT0FBTyxXQUViLElBQUlDLEVBQU9ILEtBQUtJLE1BQU0sR0FDdEJDLFFBQVFDLElBQUksQ0FDUkMsSUFBTSxnQkFDTkMsUUFBVSxTQUFVQyxHQUNoQixHQUFxQixNQUFsQkEsRUFBYSxLQUFTLENBQ3JCLElBQUlDLEVBQVFELEVBQWEsS0FBUyxNQUc5QkUsR0FBTyxJQUFJQyxNQUFPQyxVQUFXLElBQUtWLEVBQUtXLEtBQUtDLE1BQU0sS0FBSyxHQUN2REMsRUFBVyxDQUNYQyxNQUFPTixFQUNQTyxPQUFPLEdBQ1BDLFNBQVMsQ0FBQyxZQUFZLGFBQWEsY0FFbkNDLEVBQVMsQ0FDVEMsZUFBYyxFQUNkQyxXQUFXLEVBQ1hDLE9BQU9DLE1BQU1ELE9BQU9FLElBRVBELE1BQU1FLE9BQU92QixFQUFLUSxFQUFJRCxFQUFNTSxFQUFTSSxHQUMzQ08sVUFBVSxDQUNqQkMsS0FBUTdCLEVBQUs4Qix5QkFDYkMsTUFBUS9CLEVBQUtnQyxzQkFDYkMsU0FBV2pDLEVBQUtrQyxrQ0FXeEM1QyxLQUFLQyxVQUFVdUMseUJBQTJCLFNBQVNLLEdBQy9DLElBRUlDLEVBRlFELEVBQVNFLE1BQ0RDLFFBQ01DLFFBQVEsR0FBRyxJQUNqQ0MsRUFBZ0J0QyxFQUFFLG1CQUNsQnVDLEVBQWN2QyxFQUFFLGlCQUNwQnVDLEVBQVlDLElBQUksQ0FBQ0MsTUFBUSxJQUN6QkgsRUFBY0ksT0FDZEgsRUFBWUMsSUFBSSxDQUFDQyxNQUFRUCxJQUN6QkssRUFBWUksS0FBS1QsSUFPckI5QyxLQUFLQyxVQUFVeUMsc0JBQXdCLFNBQVNELEdBQzVDZSxRQUFRQyxJQUFJaEIsRUFBTWlCLFNBQ0U5QyxFQUFFLG1CQUNSK0MsUUFHbEIzRCxLQUFLQyxVQUFVMkMseUJBQTJCLFNBQVNDLEdBQy9DVyxRQUFRQyxJQUFJWixHQUNRakMsRUFBRSxtQkFDUitDLE9BQ2QsSUFFSXpDLEVBRlMsb0NBQ0UyQixFQUFTdkIsSUFFSFYsRUFBRSwyQkFDUmdELElBQUkxQyxJQUd2QmxCLEtBQUtDLFVBQVU0RCxrQkFBb0IsV0FDZmpELEVBQUUsZUFDUmtELE1BQU0sV0FDWkMsTUFBTUMsaUJBQ04sSUFBSUMsRUFBUXJELEVBQUUsdUJBQXVCZ0QsTUFDakNNLEVBQVd0RCxFQUFFLDJCQUEyQmdELE1BQ3hDTyxFQUFPdkQsRUFBRSxzQkFBc0JnRCxNQUMvQlEsRUFBWXhELEVBQUUsMkJBQTJCZ0QsTUFDekNTLEVBQVVsRSxPQUFPQyxHQUFHa0UsYUFDeEJ0RCxRQUFRdUQsS0FBSyxDQUNUckQsSUFBTSxtQkFDTnNELEtBQU8sQ0FDSFAsTUFBUUEsRUFDUkMsU0FBV0EsRUFDWEMsS0FBT0EsRUFDUEMsVUFBWUEsRUFDWkMsUUFBVUEsR0FFZGxELFFBQVUsU0FBVUMsR0FDSSxNQUFqQkEsRUFBYSxNQUNacUQsU0FBU0MsYUFBYSxZQUFZLFdBQzlCdkUsT0FBT3dFLFNBQVNDLGlCQVN2QzVFLEtBQU1DLFVBQVU0RSxJQUFNLFdBQ25CLElBQUluRSxFQUFPQyxLQUVWRCxFQUFLRCw2QkFDTEMsRUFBS1IsYUFDTFEsRUFBS21ELHFCQUdUakQsRUFBRSxZQUNhLElBQUlaLE1BQ1Y2RSIsImZpbGUiOiJ3cml0ZV9uZXdzLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxuXG5cblxuIGZ1bmN0aW9uIE5ld3MoKSB7XG5cbiB9XG5cblxuIE5ld3MucHJvdG90eXBlLmluaXRFZGl0b3IgPSBmdW5jdGlvbigpe1xuICAgIHdpbmRvdy51ZSA9IFVFLmdldEVkaXRvcignZWRpdG9yJyx7XG4gICAgICAgICdpbml0aWFsRnJhbWVIZWlnaHQnOjQwMCxcbiAgICAgICAgJ3NlcnZlclVybCc6Jy91ZWRpdG9yL3VwbG9hZC8nLFxuICAgIH0pOy8v5YWo5bGA55qE5LiA5Liq5Y+Y6YePXG4gfVxuXG4gTmV3cy5wcm90b3R5cGUubGlzdGVuUWluaXVVcGxvYWRGaWxlRXZlbnQgPSBmdW5jdGlvbigpe1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgdXBsb2FkQnRuID0gJCgnI3RodW1ibmFpbC1idG4nKTtcbiAgICB1cGxvYWRCdG4uY2hhbmdlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAvL+WSjOS4g+eJm+S6kei/m+ihjOS6pOS6ku+8jOmmluWFiOimgeaciXRva2VuXG4gICAgICAgIHZhciBmaWxlID0gdGhpcy5maWxlc1swXTtcbiAgICAgICAgeGZ6YWpheC5nZXQoe1xuICAgICAgICAgICAgJ3VybCc6Jy9jbXMvcW50b2tlbi8nLFxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOmZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBpZihyZXN1bHRbJ2NvZGUnXT09PSAyMDApe1xuICAgICAgICAgICAgICAgICAgICB2YXIgdG9rZW4gPSByZXN1bHRbJ2RhdGEnXVsndG9rZW4nXVxuICAgICAgICAgICAgICAgICAgICAvL2EuanBnID0gWydhJywnanBnJ11cbiAgICAgICAgICAgICAgICAgICAgLy8xOTIyMTMwMzMuanBnXG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSAobmV3IERhdGUoKS5nZXRUaW1lKCkgKycuJysgZmlsZS5uYW1lLnNwbGl0KCcuJylbMV0pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcHV0RXh0cmEgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmbmFtZToga2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zOnt9LFxuICAgICAgICAgICAgICAgICAgICAgICAgbWltZVR5cGU6WydpbWFnZS9wbmcnLCdpbWFnZS9qcGVnJywnaW1hZ2UvZ2lmJ10vL+mZkOWItuaWh+S7tuS4iuS8oOeahOagvOW8j1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb25maWcgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VyQ2RuRG9tYWluOnRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXRyeUNvdW50OjYsXG4gICAgICAgICAgICAgICAgICAgICAgICByZWdpb246cWluaXUucmVnaW9uLnowXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHZhciBvYnNlcnZhYmxlID0gcWluaXUudXBsb2FkKGZpbGUsa2V5LHRva2VuLHB1dEV4dHJhLGNvbmZpZyk7XG4gICAgICAgICAgICAgICAgICAgIG9ic2VydmFibGUuc3Vic2NyaWJlKHsgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgICduZXh0Jzogc2VsZi5oYW5kbGVGaWxlVXBsb2FkUHJvZ3Jlc3MsLy/mraTlpITkuI3mmK/opoHmiafooYzov5nkuKrlh73mlbDvvIzlkI7pnaLkvJrljrvosIPnlKhcbiAgICAgICAgICAgICAgICAgICAgICAgICdlcnJvcic6c2VsZi5oYW5kbGVGaWxlVXBsb2FkRXJyb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICAnY29tcGxldGUnOnNlbGYuaGFuZGxlRmlsZVVwbG9hZENvbXBsZXRlLFxuICAgICAgICAgICAgICAgICAgICB9KVxuXG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfSk7XG4gfTtcblxuXG5OZXdzLnByb3RvdHlwZS5oYW5kbGVGaWxlVXBsb2FkUHJvZ3Jlc3MgPSBmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgdmFyIHRvdGFsID0gcmVzcG9uc2UudG90YWw7XG4gICAgdmFyIHBlcmNlbnQgPSB0b3RhbC5wZXJjZW50O1xuICAgIHZhciBwZXJjZW50VGV4dCA9IHBlcmNlbnQudG9GaXhlZCgwKSsnJSc7Ly90b0ZpeGVkKDAp6KGo56S65ZCO6Z2i5LiN6ZyA6KaB5Lu75L2V5bCP5pWwXG4gICAgdmFyIHByb2dyZXNzR3JvdXAgPSAkKCcjcHJvZ3Jlc3MtZ3JvdXAnKTtcbiAgICB2YXIgcHJvZ3Jlc3NCYXIgPSAkKCcucHJvZ3Jlc3MtYmFyJyk7XG4gICAgcHJvZ3Jlc3NCYXIuY3NzKHtcIndpZHRoXCI6MH0pOy8v6L+b5bqm5p2h5Yid5aeL5YyW5Li6MCVcbiAgICBwcm9ncmVzc0dyb3VwLnNob3coKTsvL+eEtuWQjuWxleekuui/m+W6puadoVxuICAgIHByb2dyZXNzQmFyLmNzcyh7XCJ3aWR0aFwiOnBlcmNlbnRUZXh0fSk7XG4gICAgcHJvZ3Jlc3NCYXIudGV4dChwZXJjZW50VGV4dCk7XG4gICAgLy8gY29uc29sZS5sb2cocGVyY2VudFRleHQpO1xuICAgIC8vIHByb2dyZXNzQmFyLmNzcyh7XCJ3aWR0aFwiOjB9KTtcblxuXG59XG5cbk5ld3MucHJvdG90eXBlLmhhbmRsZUZpbGVVcGxvYWRFcnJvciA9IGZ1bmN0aW9uKGVycm9yKXtcbiAgICBjb25zb2xlLmxvZyhlcnJvci5tZXNzYWdlKTtcbiAgICB2YXIgcHJvZ3Jlc3NHcm91cCA9ICQoXCIjcHJvZ3Jlc3MtZ3JvdXBcIik7Ly/kuIrkvKDlpLHotKXkuobvvIzov5vluqbmnaHkuZ/opoHpmpDol4/mjolcbiAgICBwcm9ncmVzc0dyb3VwLmhpZGUoKTtcbn1cblxuTmV3cy5wcm90b3R5cGUuaGFuZGxlRmlsZVVwbG9hZENvbXBsZXRlID0gZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcbiAgICB2YXIgcHJvZ3Jlc3NHcm91cCA9ICQoXCIjcHJvZ3Jlc3MtZ3JvdXBcIik7XG4gICAgcHJvZ3Jlc3NHcm91cC5oaWRlKCk7XG4gICAgdmFyIGRvbWFpbiA9ICdodHRwOi8vcHNpZDNvOWg0LmJrdC5jbG91ZGRuLmNvbS8nO1xuICAgIHZhciBmaWxlbmFtZSA9IHJlc3BvbnNlLmtleTtcbiAgICB2YXIgdXJsID0gZG9tYWluICsgZmlsZW5hbWU7XG4gICAgdmFyIHRodW1ibmFpbElucHV0ID0gJChcImlucHV0W25hbWU9J3RodW1ibmFpbCddXCIpO1xuICAgIHRodW1ibmFpbElucHV0LnZhbCh1cmwpO1xufVxuXG5OZXdzLnByb3RvdHlwZS5saXN0ZW5TdWJtaXRFdmVudCA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIHN1Ym1pdEJ0biA9ICQoJyNzdWJtaXQtYnRuJyk7XG4gICAgc3VibWl0QnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsvL+mYu+atoueCueWHu+eahOm7mOiupOihjOS4uu+8jOS4jeiDveS9v+eUqOS8oOe7n+eahOihqOWNleWPkemAgeS6i+S7tu+8jOWboOS4uuatpOWkhOeUqOS6hnVlZGl0b3LvvIzpgJrov4dqc+iOt+WPluWGheWuuemAmui/h2FqYXjlj5HpgIHov4fljrtcbiAgICAgICAgdmFyIHRpdGxlID0gJChcImlucHV0W25hbWU9J3RpdGxlJ11cIikudmFsKCk7XG4gICAgICAgIHZhciBjYXRlZ29yeSA9ICQoXCJzZWxlY3RbbmFtZT0nY2F0ZWdvcnknXVwiKS52YWwoKTtcbiAgICAgICAgdmFyIGRlc2MgPSAkKFwiaW5wdXRbbmFtZT0nZGVzYyddXCIpLnZhbCgpO1xuICAgICAgICB2YXIgdGh1bWJuYWlsID0gJChcImlucHV0W25hbWU9J3RodW1ibmFpbCddXCIpLnZhbCgpO1xuICAgICAgICB2YXIgY29udGVudCA9IHdpbmRvdy51ZS5nZXRDb250ZW50KCk7XG4gICAgICAgIHhmemFqYXgucG9zdCh7XG4gICAgICAgICAgICAndXJsJzonL2Ntcy93cml0ZV9uZXdzLycsXG4gICAgICAgICAgICAnZGF0YSc6e1xuICAgICAgICAgICAgICAgICd0aXRsZSc6dGl0bGUsXG4gICAgICAgICAgICAgICAgJ2NhdGVnb3J5JzpjYXRlZ29yeSxcbiAgICAgICAgICAgICAgICAnZGVzYyc6ZGVzYyxcbiAgICAgICAgICAgICAgICAndGh1bWJuYWlsJzp0aHVtYm5haWwsXG4gICAgICAgICAgICAgICAgJ2NvbnRlbnQnOmNvbnRlbnQsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOmZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBpZihyZXN1bHRbJ2NvZGUnXT09PTIwMCl7XG4gICAgICAgICAgICAgICAgICAgIHhmemFsZXJ0LmFsZXJ0U3VjY2Vzcygn5oGt5Zac77yB5paw6Ze75Y+R6KGo5oiQ5YqfJyxmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0pXG4gICAgfSlcbn1cblxuIE5ld3MgLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIC8vIHNlbGYubGlzdGVuVXBsb2FkRmlsZUV2ZW50KCk7XG4gICAgIHNlbGYubGlzdGVuUWluaXVVcGxvYWRGaWxlRXZlbnQoKTtcbiAgICAgc2VsZi5pbml0RWRpdG9yKCk7XG4gICAgIHNlbGYubGlzdGVuU3VibWl0RXZlbnQoKTtcbiB9XG4gXG4gJChmdW5jdGlvbiAoKSB7XG4gICAgIHZhciBuZXdzID0gbmV3IE5ld3MoKTtcbiAgICAgbmV3cy5ydW4oKTtcblxuIH0pIl19
