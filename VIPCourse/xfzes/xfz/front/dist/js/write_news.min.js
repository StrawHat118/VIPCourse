function News(){}News.prototype.initEditor=function(){window.ue=UE.getEditor("editor",{initialFrameHeight:400,serverUrl:"/ueditor/upload/"})},News.prototype.listenQiniuUploadFileEvent=function(){var r=this;$("#thumbnail-btn").change(function(){var a=this.files[0];xfzajax.get({url:"/cms/qntoken/",success:function(e){if(200===e.code){var t=e.data.token,n=(new Date).getTime()+"."+a.name.split(".")[1],i={fname:n,params:{},mimeType:["image/png","image/jpeg","image/gif"]},o={userCdnDomain:!0,retryCount:6,region:qiniu.region.z0};qiniu.upload(a,n,t,i,o).subscribe({next:r.handleFileUploadProgress,error:r.handleFileUploadError,complete:r.handleFileUploadComplete})}}})})},News.prototype.handleFileUploadProgress=function(e){var t=e.total.percent.toFixed(0)+"%",n=$("#progress-group"),i=$(".progress-bar");i.css({width:0}),n.show(),i.css({width:t}),i.text(t)},News.prototype.handleFileUploadError=function(e){console.log(e.message),$("#progress-group").hide()},News.prototype.handleFileUploadComplete=function(e){console.log(e),$("#progress-group").hide();var t="http://psid3o9h4.bkt.clouddn.com/"+e.key;$("input[name='thumbnail']").val(t)},News.prototype.listenSubmitEvent=function(){$("#submit-btn").click(function(){event.preventDefault();var e=$(this).attr("data-news-id"),t=$("input[name='title']").val(),n=$("select[name='category']").val(),i=$("input[name='desc']").val(),o=$("input[name='thumbnail']").val(),a=window.ue.getContent(),r="";r=e?"/cms/edit_news/":"/cms/write_news/",xfzajax.post({url:r,data:{title:t,category:n,desc:i,thumbnail:o,content:a,pk:e},success:function(e){200===e.code&&xfzalert.alertSuccess("恭喜！新闻发表成功",function(){window.location.reload()})}})})},News.prototype.run=function(){var e=this;e.listenQiniuUploadFileEvent(),e.initEditor(),e.listenSubmitEvent()},$(function(){(new News).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndyaXRlX25ld3MuanMiXSwibmFtZXMiOlsiTmV3cyIsInByb3RvdHlwZSIsImluaXRFZGl0b3IiLCJ3aW5kb3ciLCJ1ZSIsIlVFIiwiZ2V0RWRpdG9yIiwiaW5pdGlhbEZyYW1lSGVpZ2h0Iiwic2VydmVyVXJsIiwibGlzdGVuUWluaXVVcGxvYWRGaWxlRXZlbnQiLCJzZWxmIiwidGhpcyIsIiQiLCJjaGFuZ2UiLCJmaWxlIiwiZmlsZXMiLCJ4ZnphamF4IiwiZ2V0IiwidXJsIiwic3VjY2VzcyIsInJlc3VsdCIsInRva2VuIiwia2V5IiwiRGF0ZSIsImdldFRpbWUiLCJuYW1lIiwic3BsaXQiLCJwdXRFeHRyYSIsImZuYW1lIiwicGFyYW1zIiwibWltZVR5cGUiLCJjb25maWciLCJ1c2VyQ2RuRG9tYWluIiwicmV0cnlDb3VudCIsInJlZ2lvbiIsInFpbml1IiwiejAiLCJ1cGxvYWQiLCJzdWJzY3JpYmUiLCJuZXh0IiwiaGFuZGxlRmlsZVVwbG9hZFByb2dyZXNzIiwiZXJyb3IiLCJoYW5kbGVGaWxlVXBsb2FkRXJyb3IiLCJjb21wbGV0ZSIsImhhbmRsZUZpbGVVcGxvYWRDb21wbGV0ZSIsInJlc3BvbnNlIiwicGVyY2VudFRleHQiLCJ0b3RhbCIsInBlcmNlbnQiLCJ0b0ZpeGVkIiwicHJvZ3Jlc3NHcm91cCIsInByb2dyZXNzQmFyIiwiY3NzIiwid2lkdGgiLCJzaG93IiwidGV4dCIsImNvbnNvbGUiLCJsb2ciLCJtZXNzYWdlIiwiaGlkZSIsInZhbCIsImxpc3RlblN1Ym1pdEV2ZW50IiwiY2xpY2siLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwicGsiLCJhdHRyIiwidGl0bGUiLCJjYXRlZ29yeSIsImRlc2MiLCJ0aHVtYm5haWwiLCJjb250ZW50IiwiZ2V0Q29udGVudCIsInBvc3QiLCJkYXRhIiwieGZ6YWxlcnQiLCJhbGVydFN1Y2Nlc3MiLCJsb2NhdGlvbiIsInJlbG9hZCIsInJ1biJdLCJtYXBwaW5ncyI6IkFBSUMsU0FBU0EsUUFLVEEsS0FBS0MsVUFBVUMsV0FBYSxXQUN6QkMsT0FBT0MsR0FBS0MsR0FBR0MsVUFBVSxTQUFTLENBQzlCQyxtQkFBcUIsSUFDckJDLFVBQVksc0JBSW5CUixLQUFLQyxVQUFVUSwyQkFBNkIsV0FDekMsSUFBSUMsRUFBT0MsS0FDS0MsRUFBRSxrQkFDUkMsT0FBTyxXQUViLElBQUlDLEVBQU9ILEtBQUtJLE1BQU0sR0FDdEJDLFFBQVFDLElBQUksQ0FDUkMsSUFBTSxnQkFDTkMsUUFBVSxTQUFVQyxHQUNoQixHQUFxQixNQUFsQkEsRUFBYSxLQUFTLENBQ3JCLElBQUlDLEVBQVFELEVBQWEsS0FBUyxNQUc5QkUsR0FBTyxJQUFJQyxNQUFPQyxVQUFXLElBQUtWLEVBQUtXLEtBQUtDLE1BQU0sS0FBSyxHQUN2REMsRUFBVyxDQUNYQyxNQUFPTixFQUNQTyxPQUFPLEdBQ1BDLFNBQVMsQ0FBQyxZQUFZLGFBQWEsY0FFbkNDLEVBQVMsQ0FDVEMsZUFBYyxFQUNkQyxXQUFXLEVBQ1hDLE9BQU9DLE1BQU1ELE9BQU9FLElBRVBELE1BQU1FLE9BQU92QixFQUFLUSxFQUFJRCxFQUFNTSxFQUFTSSxHQUMzQ08sVUFBVSxDQUNqQkMsS0FBUTdCLEVBQUs4Qix5QkFDYkMsTUFBUS9CLEVBQUtnQyxzQkFDYkMsU0FBV2pDLEVBQUtrQyxrQ0FXeEM1QyxLQUFLQyxVQUFVdUMseUJBQTJCLFNBQVNLLEdBQy9DLElBRUlDLEVBRlFELEVBQVNFLE1BQ0RDLFFBQ01DLFFBQVEsR0FBRyxJQUNqQ0MsRUFBZ0J0QyxFQUFFLG1CQUNsQnVDLEVBQWN2QyxFQUFFLGlCQUNwQnVDLEVBQVlDLElBQUksQ0FBQ0MsTUFBUSxJQUN6QkgsRUFBY0ksT0FDZEgsRUFBWUMsSUFBSSxDQUFDQyxNQUFRUCxJQUN6QkssRUFBWUksS0FBS1QsSUFPckI5QyxLQUFLQyxVQUFVeUMsc0JBQXdCLFNBQVNELEdBQzVDZSxRQUFRQyxJQUFJaEIsRUFBTWlCLFNBQ0U5QyxFQUFFLG1CQUNSK0MsUUFHbEIzRCxLQUFLQyxVQUFVMkMseUJBQTJCLFNBQVNDLEdBQy9DVyxRQUFRQyxJQUFJWixHQUNRakMsRUFBRSxtQkFDUitDLE9BQ2QsSUFFSXpDLEVBRlMsb0NBQ0UyQixFQUFTdkIsSUFFSFYsRUFBRSwyQkFDUmdELElBQUkxQyxJQUd2QmxCLEtBQUtDLFVBQVU0RCxrQkFBb0IsV0FDZmpELEVBQUUsZUFDUmtELE1BQU0sV0FDWkMsTUFBTUMsaUJBQ04sSUFDSUMsRUFETXJELEVBQUVELE1BQ0N1RCxLQUFLLGdCQUNkQyxFQUFRdkQsRUFBRSx1QkFBdUJnRCxNQUNqQ1EsRUFBV3hELEVBQUUsMkJBQTJCZ0QsTUFDeENTLEVBQU96RCxFQUFFLHNCQUFzQmdELE1BQy9CVSxFQUFZMUQsRUFBRSwyQkFBMkJnRCxNQUN6Q1csRUFBVXBFLE9BQU9DLEdBQUdvRSxhQUNwQnRELEVBQU0sR0FFTkEsRUFERCtDLEVBQ08sa0JBRUEsbUJBRVZqRCxRQUFReUQsS0FBSyxDQUNUdkQsSUFBTUEsRUFDTndELEtBQU8sQ0FDSFAsTUFBUUEsRUFDUkMsU0FBV0EsRUFDWEMsS0FBT0EsRUFDUEMsVUFBWUEsRUFDWkMsUUFBVUEsRUFDVk4sR0FBS0EsR0FFVDlDLFFBQVUsU0FBVUMsR0FDSSxNQUFqQkEsRUFBYSxNQUNadUQsU0FBU0MsYUFBYSxZQUFZLFdBQzlCekUsT0FBTzBFLFNBQVNDLGlCQVN2QzlFLEtBQU1DLFVBQVU4RSxJQUFNLFdBQ25CLElBQUlyRSxFQUFPQyxLQUVWRCxFQUFLRCw2QkFDTEMsRUFBS1IsYUFDTFEsRUFBS21ELHFCQUdUakQsRUFBRSxZQUNhLElBQUlaLE1BQ1YrRSIsImZpbGUiOiJ3cml0ZV9uZXdzLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxuXG5cblxuIGZ1bmN0aW9uIE5ld3MoKSB7XG5cbiB9XG5cblxuIE5ld3MucHJvdG90eXBlLmluaXRFZGl0b3IgPSBmdW5jdGlvbigpe1xuICAgIHdpbmRvdy51ZSA9IFVFLmdldEVkaXRvcignZWRpdG9yJyx7XG4gICAgICAgICdpbml0aWFsRnJhbWVIZWlnaHQnOjQwMCxcbiAgICAgICAgJ3NlcnZlclVybCc6Jy91ZWRpdG9yL3VwbG9hZC8nLFxuICAgIH0pOy8v5YWo5bGA55qE5LiA5Liq5Y+Y6YePXG4gfVxuXG4gTmV3cy5wcm90b3R5cGUubGlzdGVuUWluaXVVcGxvYWRGaWxlRXZlbnQgPSBmdW5jdGlvbigpe1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgdXBsb2FkQnRuID0gJCgnI3RodW1ibmFpbC1idG4nKTtcbiAgICB1cGxvYWRCdG4uY2hhbmdlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAvL+WSjOS4g+eJm+S6kei/m+ihjOS6pOS6ku+8jOmmluWFiOimgeaciXRva2VuXG4gICAgICAgIHZhciBmaWxlID0gdGhpcy5maWxlc1swXTtcbiAgICAgICAgeGZ6YWpheC5nZXQoe1xuICAgICAgICAgICAgJ3VybCc6Jy9jbXMvcW50b2tlbi8nLFxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOmZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBpZihyZXN1bHRbJ2NvZGUnXT09PSAyMDApe1xuICAgICAgICAgICAgICAgICAgICB2YXIgdG9rZW4gPSByZXN1bHRbJ2RhdGEnXVsndG9rZW4nXVxuICAgICAgICAgICAgICAgICAgICAvL2EuanBnID0gWydhJywnanBnJ11cbiAgICAgICAgICAgICAgICAgICAgLy8xOTIyMTMwMzMuanBnXG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSAobmV3IERhdGUoKS5nZXRUaW1lKCkgKycuJysgZmlsZS5uYW1lLnNwbGl0KCcuJylbMV0pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcHV0RXh0cmEgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmbmFtZToga2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zOnt9LFxuICAgICAgICAgICAgICAgICAgICAgICAgbWltZVR5cGU6WydpbWFnZS9wbmcnLCdpbWFnZS9qcGVnJywnaW1hZ2UvZ2lmJ10vL+mZkOWItuaWh+S7tuS4iuS8oOeahOagvOW8j1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb25maWcgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VyQ2RuRG9tYWluOnRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXRyeUNvdW50OjYsXG4gICAgICAgICAgICAgICAgICAgICAgICByZWdpb246cWluaXUucmVnaW9uLnowXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHZhciBvYnNlcnZhYmxlID0gcWluaXUudXBsb2FkKGZpbGUsa2V5LHRva2VuLHB1dEV4dHJhLGNvbmZpZyk7XG4gICAgICAgICAgICAgICAgICAgIG9ic2VydmFibGUuc3Vic2NyaWJlKHsgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgICduZXh0Jzogc2VsZi5oYW5kbGVGaWxlVXBsb2FkUHJvZ3Jlc3MsLy/mraTlpITkuI3mmK/opoHmiafooYzov5nkuKrlh73mlbDvvIzlkI7pnaLkvJrljrvosIPnlKhcbiAgICAgICAgICAgICAgICAgICAgICAgICdlcnJvcic6c2VsZi5oYW5kbGVGaWxlVXBsb2FkRXJyb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICAnY29tcGxldGUnOnNlbGYuaGFuZGxlRmlsZVVwbG9hZENvbXBsZXRlLFxuICAgICAgICAgICAgICAgICAgICB9KVxuXG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfSk7XG4gfTtcblxuXG5OZXdzLnByb3RvdHlwZS5oYW5kbGVGaWxlVXBsb2FkUHJvZ3Jlc3MgPSBmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgdmFyIHRvdGFsID0gcmVzcG9uc2UudG90YWw7XG4gICAgdmFyIHBlcmNlbnQgPSB0b3RhbC5wZXJjZW50O1xuICAgIHZhciBwZXJjZW50VGV4dCA9IHBlcmNlbnQudG9GaXhlZCgwKSsnJSc7Ly90b0ZpeGVkKDAp6KGo56S65ZCO6Z2i5LiN6ZyA6KaB5Lu75L2V5bCP5pWwXG4gICAgdmFyIHByb2dyZXNzR3JvdXAgPSAkKCcjcHJvZ3Jlc3MtZ3JvdXAnKTtcbiAgICB2YXIgcHJvZ3Jlc3NCYXIgPSAkKCcucHJvZ3Jlc3MtYmFyJyk7XG4gICAgcHJvZ3Jlc3NCYXIuY3NzKHtcIndpZHRoXCI6MH0pOy8v6L+b5bqm5p2h5Yid5aeL5YyW5Li6MCVcbiAgICBwcm9ncmVzc0dyb3VwLnNob3coKTsvL+eEtuWQjuWxleekuui/m+W6puadoVxuICAgIHByb2dyZXNzQmFyLmNzcyh7XCJ3aWR0aFwiOnBlcmNlbnRUZXh0fSk7XG4gICAgcHJvZ3Jlc3NCYXIudGV4dChwZXJjZW50VGV4dCk7XG4gICAgLy8gY29uc29sZS5sb2cocGVyY2VudFRleHQpO1xuICAgIC8vIHByb2dyZXNzQmFyLmNzcyh7XCJ3aWR0aFwiOjB9KTtcblxuXG59XG5cbk5ld3MucHJvdG90eXBlLmhhbmRsZUZpbGVVcGxvYWRFcnJvciA9IGZ1bmN0aW9uKGVycm9yKXtcbiAgICBjb25zb2xlLmxvZyhlcnJvci5tZXNzYWdlKTtcbiAgICB2YXIgcHJvZ3Jlc3NHcm91cCA9ICQoXCIjcHJvZ3Jlc3MtZ3JvdXBcIik7Ly/kuIrkvKDlpLHotKXkuobvvIzov5vluqbmnaHkuZ/opoHpmpDol4/mjolcbiAgICBwcm9ncmVzc0dyb3VwLmhpZGUoKTtcbn1cblxuTmV3cy5wcm90b3R5cGUuaGFuZGxlRmlsZVVwbG9hZENvbXBsZXRlID0gZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcbiAgICB2YXIgcHJvZ3Jlc3NHcm91cCA9ICQoXCIjcHJvZ3Jlc3MtZ3JvdXBcIik7XG4gICAgcHJvZ3Jlc3NHcm91cC5oaWRlKCk7XG4gICAgdmFyIGRvbWFpbiA9ICdodHRwOi8vcHNpZDNvOWg0LmJrdC5jbG91ZGRuLmNvbS8nO1xuICAgIHZhciBmaWxlbmFtZSA9IHJlc3BvbnNlLmtleTtcbiAgICB2YXIgdXJsID0gZG9tYWluICsgZmlsZW5hbWU7XG4gICAgdmFyIHRodW1ibmFpbElucHV0ID0gJChcImlucHV0W25hbWU9J3RodW1ibmFpbCddXCIpO1xuICAgIHRodW1ibmFpbElucHV0LnZhbCh1cmwpO1xufVxuXG5OZXdzLnByb3RvdHlwZS5saXN0ZW5TdWJtaXRFdmVudCA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIHN1Ym1pdEJ0biA9ICQoJyNzdWJtaXQtYnRuJyk7XG4gICAgc3VibWl0QnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsvL+mYu+atoueCueWHu+eahOm7mOiupOihjOS4uu+8jOS4jeiDveS9v+eUqOS8oOe7n+eahOihqOWNleWPkemAgeS6i+S7tu+8jOWboOS4uuatpOWkhOeUqOS6hnVlZGl0b3LvvIzpgJrov4dqc+iOt+WPluWGheWuuemAmui/h2FqYXjlj5HpgIHov4fljrtcbiAgICAgICAgdmFyIGJ0biA9ICQodGhpcyk7XG4gICAgICAgIHZhciBwayA9IGJ0bi5hdHRyKCdkYXRhLW5ld3MtaWQnKVxuICAgICAgICB2YXIgdGl0bGUgPSAkKFwiaW5wdXRbbmFtZT0ndGl0bGUnXVwiKS52YWwoKTtcbiAgICAgICAgdmFyIGNhdGVnb3J5ID0gJChcInNlbGVjdFtuYW1lPSdjYXRlZ29yeSddXCIpLnZhbCgpO1xuICAgICAgICB2YXIgZGVzYyA9ICQoXCJpbnB1dFtuYW1lPSdkZXNjJ11cIikudmFsKCk7XG4gICAgICAgIHZhciB0aHVtYm5haWwgPSAkKFwiaW5wdXRbbmFtZT0ndGh1bWJuYWlsJ11cIikudmFsKCk7XG4gICAgICAgIHZhciBjb250ZW50ID0gd2luZG93LnVlLmdldENvbnRlbnQoKTtcbiAgICAgICAgdmFyIHVybCA9ICcnO1xuICAgICAgICBpZihwayl7XG4gICAgICAgICAgICB1cmwgPSAnL2Ntcy9lZGl0X25ld3MvJztcbiAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgdXJsID0gJy9jbXMvd3JpdGVfbmV3cy8nO1xuICAgICAgICB9XG4gICAgICAgIHhmemFqYXgucG9zdCh7XG4gICAgICAgICAgICAndXJsJzp1cmwsXG4gICAgICAgICAgICAnZGF0YSc6e1xuICAgICAgICAgICAgICAgICd0aXRsZSc6dGl0bGUsXG4gICAgICAgICAgICAgICAgJ2NhdGVnb3J5JzpjYXRlZ29yeSxcbiAgICAgICAgICAgICAgICAnZGVzYyc6ZGVzYyxcbiAgICAgICAgICAgICAgICAndGh1bWJuYWlsJzp0aHVtYm5haWwsXG4gICAgICAgICAgICAgICAgJ2NvbnRlbnQnOmNvbnRlbnQsXG4gICAgICAgICAgICAgICAgJ3BrJzpwayxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnc3VjY2Vzcyc6ZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGlmKHJlc3VsdFsnY29kZSddPT09MjAwKXtcbiAgICAgICAgICAgICAgICAgICAgeGZ6YWxlcnQuYWxlcnRTdWNjZXNzKCfmga3llpzvvIHmlrDpl7vlj5HooajmiJDlip8nLGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSlcbiAgICB9KVxufVxuXG4gTmV3cyAucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgLy8gc2VsZi5saXN0ZW5VcGxvYWRGaWxlRXZlbnQoKTtcbiAgICAgc2VsZi5saXN0ZW5RaW5pdVVwbG9hZEZpbGVFdmVudCgpO1xuICAgICBzZWxmLmluaXRFZGl0b3IoKTtcbiAgICAgc2VsZi5saXN0ZW5TdWJtaXRFdmVudCgpO1xuIH1cbiBcbiAkKGZ1bmN0aW9uICgpIHtcbiAgICAgdmFyIG5ld3MgPSBuZXcgTmV3cygpO1xuICAgICBuZXdzLnJ1bigpO1xuXG4gfSkiXX0=
