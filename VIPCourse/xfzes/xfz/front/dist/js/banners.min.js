function Banners(){}Banners.prototype.loadData=function(){var r=this;xfzajax.get({url:"/cms/banner_list/",success:function(n){if(200===n.code){var e=n.data;console.log(e);for(var a=0;a<e.length;a++){var t=e[a];r.createBannerItem(t)}}}})},Banners.prototype.createBannerItem=function(n){var e=this,a=template("banner-item",{banner:n}),t=$(".banner-list-group"),r=null;r=n?(t.append(a),t.find(".banner-item:last")):(t.prepend(a),t.find(".banner-item:first")),e.addImageSelectEvent(r),e.addRemoveBannerEvent(r),e.addSaveBannerEvent(r)},Banners.prototype.listenAddBannerEvent=function(){var n=this;$("#add-banner-btn").click(function(){6<=$(".banner-list-group").children().length?window.messageBox.showInfo("最多只能添加6张轮播图！"):n.createBannerItem()})},Banners.prototype.addImageSelectEvent=function(n){var a=n.find(".thumbnail"),e=n.find(".image-input");a.click(function(){e.click()}),e.change(function(){var n=this.files[0],e=new FormData;e.append("file",n),xfzajax.post({url:"/cms/upload_file/",data:e,processData:!1,contentType:!1,success:function(n){if(200===n.code){var e=n.data.url;a.attr("src",e)}}})})},Banners.prototype.addRemoveBannerEvent=function(e){e.find(".close-btn").click(function(){var n=e.attr("data-banner-id");n?xfzalert.alertConfirm({text:"您确定要删除这个轮播图吗?",confirmCallback:function(){xfzajax.post({url:"/cms/delete_banner/",data:{banner_id:n},success:function(n){200===n.code&&(e.remove(),window.messageBox.showSuccess("轮播图删除才成功！"))}})}}):e.remove()})},Banners.prototype.addSaveBannerEvent=function(t){var n=t.find(".save-btn"),r=t.find(".thumbnail"),i=t.find("input[name='priority']"),o=t.find("input[name='link_to']"),s=t.find('span[class="priority"]'),c=t.attr("data-banner-id"),d="";d=c?"/cms/edit_banner/":"/cms/add_banner/",n.click(function(){var n=r.attr("src"),e=i.val(),a=o.val();xfzajax.post({url:d,data:{image_url:n,priority:e,link_to:a,pk:c},success:function(n){200===n.code&&(console.log("success: ",window),c?window.messageBox.showSuccess("轮播图修改成功！"):(c=n.data.banner_id,t.attr("data-banner-id",c),window.messageBox.showSuccess("轮播图添加完成")),s.text("优先级："+e))}})})},Banners.prototype.run=function(){this.listenAddBannerEvent(),this.loadData()},$(function(){(new Banners).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhbm5lcnMuanMiXSwibmFtZXMiOlsiQmFubmVycyIsInByb3RvdHlwZSIsImxvYWREYXRhIiwic2VsZiIsInRoaXMiLCJ4ZnphamF4IiwiZ2V0IiwidXJsIiwic3VjY2VzcyIsInJlc3VsdCIsImJhbm5lcnMiLCJjb25zb2xlIiwibG9nIiwiaSIsImxlbmd0aCIsImJhbm5lciIsImNyZWF0ZUJhbm5lckl0ZW0iLCJ0cGwiLCJ0ZW1wbGF0ZSIsImJhbm5lckxpc3RHcm91cCIsIiQiLCJiYW5uZXJJdGVtIiwiYXBwZW5kIiwiZmluZCIsInByZXBlbmQiLCJhZGRJbWFnZVNlbGVjdEV2ZW50IiwiYWRkUmVtb3ZlQmFubmVyRXZlbnQiLCJhZGRTYXZlQmFubmVyRXZlbnQiLCJsaXN0ZW5BZGRCYW5uZXJFdmVudCIsImNsaWNrIiwiY2hpbGRyZW4iLCJ3aW5kb3ciLCJtZXNzYWdlQm94Iiwic2hvd0luZm8iLCJpbWFnZSIsImltYWdlSW5wdXQiLCJjaGFuZ2UiLCJmaWxlIiwiZmlsZXMiLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwicG9zdCIsImRhdGEiLCJwcm9jZXNzRGF0YSIsImNvbnRlbnRUeXBlIiwiYXR0ciIsImJhbm5lcklkIiwieGZ6YWxlcnQiLCJhbGVydENvbmZpcm0iLCJ0ZXh0IiwiY29uZmlybUNhbGxiYWNrIiwiYmFubmVyX2lkIiwicmVtb3ZlIiwic2hvd1N1Y2Nlc3MiLCJzYXZlQnRuIiwiaW1hZ2VUYWciLCJwcmlvcml0eVRhZyIsImxpbmt0b1RhZyIsInByaW9yaXR5U3BhbiIsImltYWdlX3VybCIsInByaW9yaXR5IiwidmFsIiwibGlua190byIsInBrIiwicnVuIl0sIm1hcHBpbmdzIjoiQUFDQSxTQUFTQSxXQUlUQSxRQUFRQyxVQUFVQyxTQUFXLFdBQ3pCLElBQUlDLEVBQU9DLEtBQ1hDLFFBQVFDLElBQUksQ0FDUkMsSUFBTyxvQkFDUEMsUUFBVyxTQUFVQyxHQUNqQixHQUFzQixNQUFuQkEsRUFBYSxLQUFVLENBQ3RCLElBQUlDLEVBQVVELEVBQWEsS0FDM0JFLFFBQVFDLElBQUlGLEdBQ1osSUFBSSxJQUFJRyxFQUFFLEVBQUdBLEVBQUVILEVBQVFJLE9BQU9ELElBQUksQ0FDOUIsSUFBSUUsRUFBU0wsRUFBUUcsR0FDckJWLEVBQUthLGlCQUFpQkQsU0FPMUNmLFFBQVFDLFVBQVVlLGlCQUFtQixTQUFVRCxHQUMzQyxJQUFJWixFQUFPQyxLQUNQYSxFQUFNQyxTQUFTLGNBQWMsQ0FBQ0gsT0FBU0EsSUFDdkNJLEVBQWtCQyxFQUFFLHNCQUVwQkMsRUFBYSxLQUdiQSxFQUZETixHQUNDSSxFQUFnQkcsT0FBT0wsR0FDVkUsRUFBZ0JJLEtBQUssdUJBRWxDSixFQUFnQkssUUFBUVAsR0FDWEUsRUFBZ0JJLEtBQUssdUJBRXRDcEIsRUFBS3NCLG9CQUFvQkosR0FDekJsQixFQUFLdUIscUJBQXFCTCxHQUMxQmxCLEVBQUt3QixtQkFBbUJOLElBRzVCckIsUUFBUUMsVUFBVTJCLHFCQUF1QixXQUNyQyxJQUFJekIsRUFBT0MsS0FDRWdCLEVBQUUsbUJBQ1JTLE1BQU0sV0FHSSxHQUZTVCxFQUFFLHNCQUNLVSxXQUFXaEIsT0FFcENpQixPQUFPQyxXQUFXQyxTQUFTLGdCQUcvQjlCLEVBQUthLHNCQUliaEIsUUFBUUMsVUFBVXdCLG9CQUFzQixTQUFVSixHQUM5QyxJQUFJYSxFQUFRYixFQUFXRSxLQUFLLGNBQ3hCWSxFQUFhZCxFQUFXRSxLQUFLLGdCQUlqQ1csRUFBTUwsTUFBTSxXQUNSTSxFQUFXTixVQUdmTSxFQUFXQyxPQUFPLFdBQ2QsSUFBSUMsRUFBT2pDLEtBQUtrQyxNQUFNLEdBQ2xCQyxFQUFXLElBQUlDLFNBQ25CRCxFQUFTakIsT0FBTyxPQUFPZSxHQUN2QmhDLFFBQVFvQyxLQUFLLENBQ1RsQyxJQUFPLG9CQUNQbUMsS0FBUUgsRUFDUkksYUFBZSxFQUNmQyxhQUFlLEVBQ2ZwQyxRQUFXLFNBQVVDLEdBQ2pCLEdBQXNCLE1BQW5CQSxFQUFhLEtBQVUsQ0FDdEIsSUFBSUYsRUFBTUUsRUFBYSxLQUFPLElBQzlCeUIsRUFBTVcsS0FBSyxNQUFNdEMsVUFPckNQLFFBQVFDLFVBQVV5QixxQkFBdUIsU0FBVUwsR0FDaENBLEVBQVdFLEtBQUssY0FFdEJNLE1BQU0sV0FDWCxJQUFJaUIsRUFBV3pCLEVBQVd3QixLQUFLLGtCQUM1QkMsRUFDQ0MsU0FBU0MsYUFBYSxDQUNsQkMsS0FBUSxnQkFDUkMsZ0JBQW1CLFdBQ2Y3QyxRQUFRb0MsS0FBSyxDQUNUbEMsSUFBTyxzQkFDUG1DLEtBQVEsQ0FDSlMsVUFBYUwsR0FFakJ0QyxRQUFXLFNBQVVDLEdBQ0ssTUFBbkJBLEVBQWEsT0FDWlksRUFBVytCLFNBQ1hyQixPQUFPQyxXQUFXcUIsWUFBWSxvQkFPbERoQyxFQUFXK0IsWUFLdkJwRCxRQUFRQyxVQUFVMEIsbUJBQXFCLFNBQVVOLEdBQzdDLElBQUlpQyxFQUFVakMsRUFBV0UsS0FBSyxhQUMxQmdDLEVBQVdsQyxFQUFXRSxLQUFLLGNBQzNCaUMsRUFBY25DLEVBQVdFLEtBQUssMEJBQzlCa0MsRUFBWXBDLEVBQVdFLEtBQUsseUJBQzVCbUMsRUFBZXJDLEVBQVdFLEtBQUssMEJBQy9CdUIsRUFBV3pCLEVBQVd3QixLQUFLLGtCQUMzQnRDLEVBQU0sR0FFTkEsRUFERHVDLEVBQ08sb0JBRUEsbUJBRVZRLEVBQVF6QixNQUFNLFdBQ1YsSUFBSThCLEVBQVlKLEVBQVNWLEtBQUssT0FDMUJlLEVBQVdKLEVBQVlLLE1BQ3ZCQyxFQUFVTCxFQUFVSSxNQUN4QnhELFFBQVFvQyxLQUFLLENBQ1RsQyxJQUFPQSxFQUNQbUMsS0FBTyxDQUNIaUIsVUFBYUEsRUFDYkMsU0FBWUEsRUFDWkUsUUFBV0EsRUFDWEMsR0FBTWpCLEdBRVZ0QyxRQUFXLFNBQVVDLEdBQ0ssTUFBbkJBLEVBQWEsT0FDWkUsUUFBUUMsSUFBSSxZQUFhbUIsUUFDdEJlLEVBQ0NmLE9BQU9DLFdBQVdxQixZQUFZLGFBRTlCUCxFQUFXckMsRUFBYSxLQUFhLFVBQ3JDWSxFQUFXd0IsS0FBSyxpQkFBaUJDLEdBQ2pDZixPQUFPQyxXQUFXcUIsWUFBWSxZQUdsQ0ssRUFBYVQsS0FBSyxPQUFPVyxVQU83QzVELFFBQVFDLFVBQVUrRCxJQUFNLFdBQ3BCNUQsS0FBS3dCLHVCQUNMeEIsS0FBS0YsWUFHVGtCLEVBQUUsWUFDZ0IsSUFBSXBCLFNBQ1ZnRSIsImZpbGUiOiJiYW5uZXJzLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxuZnVuY3Rpb24gQmFubmVycygpIHtcblxufVxuXG5CYW5uZXJzLnByb3RvdHlwZS5sb2FkRGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgeGZ6YWpheC5nZXQoe1xuICAgICAgICAndXJsJzogJy9jbXMvYmFubmVyX2xpc3QvJyxcbiAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICBpZihyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKXtcbiAgICAgICAgICAgICAgICB2YXIgYmFubmVycyA9IHJlc3VsdFsnZGF0YSddO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGJhbm5lcnMpO1xuICAgICAgICAgICAgICAgIGZvcih2YXIgaT0wOyBpPGJhbm5lcnMubGVuZ3RoO2krKyl7XG4gICAgICAgICAgICAgICAgICAgIHZhciBiYW5uZXIgPSBiYW5uZXJzW2ldO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmNyZWF0ZUJhbm5lckl0ZW0oYmFubmVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5cbkJhbm5lcnMucHJvdG90eXBlLmNyZWF0ZUJhbm5lckl0ZW0gPSBmdW5jdGlvbiAoYmFubmVyKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciB0cGwgPSB0ZW1wbGF0ZShcImJhbm5lci1pdGVtXCIse1wiYmFubmVyXCI6YmFubmVyfSk7XG4gICAgdmFyIGJhbm5lckxpc3RHcm91cCA9ICQoXCIuYmFubmVyLWxpc3QtZ3JvdXBcIik7XG5cbiAgICB2YXIgYmFubmVySXRlbSA9IG51bGw7XG4gICAgaWYoYmFubmVyKXtcbiAgICAgICAgYmFubmVyTGlzdEdyb3VwLmFwcGVuZCh0cGwpO1xuICAgICAgICBiYW5uZXJJdGVtID0gYmFubmVyTGlzdEdyb3VwLmZpbmQoXCIuYmFubmVyLWl0ZW06bGFzdFwiKTtcbiAgICB9ZWxzZXtcbiAgICAgICAgYmFubmVyTGlzdEdyb3VwLnByZXBlbmQodHBsKTtcbiAgICAgICAgYmFubmVySXRlbSA9IGJhbm5lckxpc3RHcm91cC5maW5kKFwiLmJhbm5lci1pdGVtOmZpcnN0XCIpO1xuICAgIH1cbiAgICBzZWxmLmFkZEltYWdlU2VsZWN0RXZlbnQoYmFubmVySXRlbSk7XG4gICAgc2VsZi5hZGRSZW1vdmVCYW5uZXJFdmVudChiYW5uZXJJdGVtKTtcbiAgICBzZWxmLmFkZFNhdmVCYW5uZXJFdmVudChiYW5uZXJJdGVtKTtcbn07XG5cbkJhbm5lcnMucHJvdG90eXBlLmxpc3RlbkFkZEJhbm5lckV2ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgYWRkQnRuID0gJChcIiNhZGQtYmFubmVyLWJ0blwiKTtcbiAgICBhZGRCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYmFubmVyTGlzdEdyb3VwID0gJCgnLmJhbm5lci1saXN0LWdyb3VwJyk7XG4gICAgICAgIHZhciBsZW5ndGggPSBiYW5uZXJMaXN0R3JvdXAuY2hpbGRyZW4oKS5sZW5ndGg7XG4gICAgICAgIGlmKGxlbmd0aCA+PSA2KXtcbiAgICAgICAgICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3dJbmZvKCfmnIDlpJrlj6rog73mt7vliqA25byg6L2u5pKt5Zu+77yBJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc2VsZi5jcmVhdGVCYW5uZXJJdGVtKCk7XG4gICAgfSk7XG59O1xuXG5CYW5uZXJzLnByb3RvdHlwZS5hZGRJbWFnZVNlbGVjdEV2ZW50ID0gZnVuY3Rpb24gKGJhbm5lckl0ZW0pIHtcbiAgICB2YXIgaW1hZ2UgPSBiYW5uZXJJdGVtLmZpbmQoJy50aHVtYm5haWwnKTtcbiAgICB2YXIgaW1hZ2VJbnB1dCA9IGJhbm5lckl0ZW0uZmluZCgnLmltYWdlLWlucHV0Jyk7XG4gICAgLy8gdmFyIHRoYXQgPSAkKHRoaXMpO1xuICAgIC8vIHZhciBpbWFnZUlucHV0ID0gdGhhdC5zaWJsaW5ncygnLmltZ2FnZS1pbnB1dCcpXG4gICAgLy8g5Zu+54mH5piv5LiN6IO95aSf5omT5byA5paH5Lu26YCJ5oup5qGG55qE77yM5Y+q6IO96YCa6L+HaW5wdXRbdHlwZT0nZmlsZSddICAvL+e7keWumuWFhOW8n+agh+etvlxuICAgIGltYWdlLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaW1hZ2VJbnB1dC5jbGljaygpO1xuICAgIH0pO1xuXG4gICAgaW1hZ2VJbnB1dC5jaGFuZ2UoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZmlsZSA9IHRoaXMuZmlsZXNbMF07XG4gICAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgICBmb3JtRGF0YS5hcHBlbmQoXCJmaWxlXCIsZmlsZSk7XG4gICAgICAgIHhmemFqYXgucG9zdCh7XG4gICAgICAgICAgICAndXJsJzogJy9jbXMvdXBsb2FkX2ZpbGUvJyxcbiAgICAgICAgICAgICdkYXRhJzogZm9ybURhdGEsXG4gICAgICAgICAgICAncHJvY2Vzc0RhdGEnOiBmYWxzZSxcbiAgICAgICAgICAgICdjb250ZW50VHlwZSc6IGZhbHNlLFxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYocmVzdWx0Wydjb2RlJ10gPT09IDIwMCl7XG4gICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSByZXN1bHRbJ2RhdGEnXVsndXJsJ107XG4gICAgICAgICAgICAgICAgICAgIGltYWdlLmF0dHIoJ3NyYycsdXJsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufTtcblxuQmFubmVycy5wcm90b3R5cGUuYWRkUmVtb3ZlQmFubmVyRXZlbnQgPSBmdW5jdGlvbiAoYmFubmVySXRlbSkge1xuICAgIHZhciBjbG9zZUJ0biA9IGJhbm5lckl0ZW0uZmluZCgnLmNsb3NlLWJ0bicpO1xuXG4gICAgY2xvc2VCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYmFubmVySWQgPSBiYW5uZXJJdGVtLmF0dHIoJ2RhdGEtYmFubmVyLWlkJyk7XG4gICAgICAgIGlmKGJhbm5lcklkKXtcbiAgICAgICAgICAgIHhmemFsZXJ0LmFsZXJ0Q29uZmlybSh7XG4gICAgICAgICAgICAgICAgJ3RleHQnOiAn5oKo56Gu5a6a6KaB5Yig6Zmk6L+Z5Liq6L2u5pKt5Zu+5ZCXPycsXG4gICAgICAgICAgICAgICAgJ2NvbmZpcm1DYWxsYmFjayc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgeGZ6YWpheC5wb3N0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICd1cmwnOiAnL2Ntcy9kZWxldGVfYmFubmVyLycsXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGF0YSc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYmFubmVyX2lkJzogYmFubmVySWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFubmVySXRlbS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvd1N1Y2Nlc3MoJ+i9ruaSreWbvuWIoOmZpOaJjeaIkOWKn++8gScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgYmFubmVySXRlbS5yZW1vdmUoKTtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxuQmFubmVycy5wcm90b3R5cGUuYWRkU2F2ZUJhbm5lckV2ZW50ID0gZnVuY3Rpb24gKGJhbm5lckl0ZW0pIHtcbiAgICB2YXIgc2F2ZUJ0biA9IGJhbm5lckl0ZW0uZmluZCgnLnNhdmUtYnRuJyk7XG4gICAgdmFyIGltYWdlVGFnID0gYmFubmVySXRlbS5maW5kKFwiLnRodW1ibmFpbFwiKTtcbiAgICB2YXIgcHJpb3JpdHlUYWcgPSBiYW5uZXJJdGVtLmZpbmQoXCJpbnB1dFtuYW1lPSdwcmlvcml0eSddXCIpO1xuICAgIHZhciBsaW5rdG9UYWcgPSBiYW5uZXJJdGVtLmZpbmQoXCJpbnB1dFtuYW1lPSdsaW5rX3RvJ11cIik7XG4gICAgdmFyIHByaW9yaXR5U3BhbiA9IGJhbm5lckl0ZW0uZmluZCgnc3BhbltjbGFzcz1cInByaW9yaXR5XCJdJyk7XG4gICAgdmFyIGJhbm5lcklkID0gYmFubmVySXRlbS5hdHRyKFwiZGF0YS1iYW5uZXItaWRcIik7XG4gICAgdmFyIHVybCA9ICcnO1xuICAgIGlmKGJhbm5lcklkKXtcbiAgICAgICAgdXJsID0gJy9jbXMvZWRpdF9iYW5uZXIvJztcbiAgICB9ZWxzZXtcbiAgICAgICAgdXJsID0gJy9jbXMvYWRkX2Jhbm5lci8nO1xuICAgIH1cbiAgICBzYXZlQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGltYWdlX3VybCA9IGltYWdlVGFnLmF0dHIoJ3NyYycpO1xuICAgICAgICB2YXIgcHJpb3JpdHkgPSBwcmlvcml0eVRhZy52YWwoKTtcbiAgICAgICAgdmFyIGxpbmtfdG8gPSBsaW5rdG9UYWcudmFsKCk7XG4gICAgICAgIHhmemFqYXgucG9zdCh7XG4gICAgICAgICAgICAndXJsJzogdXJsLFxuICAgICAgICAgICAgJ2RhdGEnOntcbiAgICAgICAgICAgICAgICAnaW1hZ2VfdXJsJzogaW1hZ2VfdXJsLFxuICAgICAgICAgICAgICAgICdwcmlvcml0eSc6IHByaW9yaXR5LFxuICAgICAgICAgICAgICAgICdsaW5rX3RvJzogbGlua190byxcbiAgICAgICAgICAgICAgICAncGsnOiBiYW5uZXJJZFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGlmKHJlc3VsdFsnY29kZSddID09PSAyMDApe1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc3VjY2VzczogJywgd2luZG93KTtcbiAgICAgICAgICAgICAgICAgICAgaWYoYmFubmVySWQpe1xuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvd1N1Y2Nlc3MoJ+i9ruaSreWbvuS/ruaUueaIkOWKn++8gScpO1xuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhbm5lcklkID0gcmVzdWx0WydkYXRhJ11bJ2Jhbm5lcl9pZCddO1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFubmVySXRlbS5hdHRyKCdkYXRhLWJhbm5lci1pZCcsYmFubmVySWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvd1N1Y2Nlc3MoJ+i9ruaSreWbvua3u+WKoOWujOaIkCcpO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcHJpb3JpdHlTcGFuLnRleHQoXCLkvJjlhYjnuqfvvJpcIitwcmlvcml0eSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn07XG5cbkJhbm5lcnMucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmxpc3RlbkFkZEJhbm5lckV2ZW50KCk7XG4gICAgdGhpcy5sb2FkRGF0YSgpO1xufTtcblxuJChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGJhbm5lcnMgPSBuZXcgQmFubmVycygpO1xuICAgIGJhbm5lcnMucnVuKCk7XG59KTsiXX0=
